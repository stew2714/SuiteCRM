<?php

/*** DOMAIN_CHECK ***/

require_once "modules/AnalyticReporting/profiles/FunctionWrapper.php";FunctionWrapper::_ini_set('memory_limit','512M');class a0
{protected $b1 = 'YmUzYWM2sNGU24NbA363zA7IDSDFGDFGB5aVi35BDFGQ3YNO36ycDFGAATq4sYmSFVDFGDFGps7XDYEzGDDw96OnMW3kjCFJ7M+UV2kHe1WTTEcM09UMHHT';protected $c2 = '80dSbqylf4Cu5e5OYdAoAVkzpRDWAt7J1Vp27sYDU52ZBJprdRL1KE0il8KQXuKCK3sdA51P9w8U60wohX2gdmBu7uVhjxbS8g4y874Ht8L12W54Q6T4R4a';protected $d3 = 'ant9pbc3OK28Li36Mi4d3fsWJ4tQSN4a9Z2qa8W66qR7ctFbljsOc9J4wa2Bh6j8KB3vbEXB18i6gfbE0yHS0ZXQCceIlG7jwzDmN7YT06mVwcM9z0vy62T';protected $e4 = true;protected $f5 = 'blowfish';protected $g6;protected $h7 = 129600;protected $i8 = 'nSpkAHRiFfM2hE588eB';protected $j9 = 'NWCy0s0JpGubCVKlkkK';protected $k10 = 'G95ZP2uS782cFey9x5A';protected $l11 = 'BEGIN LICENSE KEY';protected $m12 = 'END LICENSE KEY';protected $n13 = 80;protected $o14 = "-";protected $p15 = '_DATA{';protected $q16 = '}DATA_';protected $r17 = array();protected $s18;protected $t19;protected $u20;protected $v21;protected $w22 = array();protected $x23 = array();protected $y24 = array();protected $z25 = 2;protected $A00 = 'M/d/Y H:i:s';protected $B11 = 0;protected $C22 = 0;function __construct($e4=true, $g6=true, $s18=true, $v21=false) {$this->D33($e4, $g6, $s18, $v21);if ($this->s18) {$this->u20 = $this->E44();}} function D33($e4=true, $g6=true, $s18=true, $v21=false) {$this->e4 = ($e4 && function_exists('mcrypt_generic'));$this->g6 = $g6;$this->v21 = $v21;$this->s18 = $s18;} function F55($G66) {$this->x23 = $G66;$this->y24 = $this->H77();$this->w22 = $this->I88();} function J99 ($K1010) {return $this->L1111($K1010);} function M1212 ($K1010, $N1313, $O1414, $P1515="80") {return $this->L1111($K1010, true, $N1313, $O1414, $P1515);} function L1111($K1010, $Q1616=false, $N1313="", $O1414="", $P1515="80") {if (strlen($K1010)>0) {$r17 = $this->R1717($K1010);if (is_array($r17)) {if ($r17['ID'] != md5($this->i8)) {$r17['RESULT'] = 'CORRUPT';} if ($this->g6) {if ($r17['DATE']['START'] > time()+$this->h7) {$r17['RESULT'] = 'TMINUS';} if ($r17['DATE']['END']-time() < 0 && $r17['DATE']['SPAN'] != 'NEVER') {$r17['RESULT'] = 'EXPIRED';} if(is_int($r17['DATE']['END'])) {$r17['DATE']['HUMAN']['START'] = date($this->A00, $r17['DATE']['START']);$r17['DATE']['HUMAN']['END'] = date($this->A00, $r17['DATE']['END']);}} if ($this->s18) {$u20 = $r17['SERVER']['MAC'] == $this->u20;$S1818 = count(array_diff($this->w22, $r17['SERVER']['PATH'])) <= $this->B11;$T1919 = $this->U2020($r17['SERVER']['DOMAIN'], $this->y24);$V2121 = count(array_diff($this->y24, $r17['SERVER']['IP'])) <= $this->C22;if (!$u20 || !$S1818 || !$T1919 || !$V2121) {$r17['RESULT'] = 'ILLEGAL';} $W2222 = $this->v21 && (in_array('127.0.0.1', $r17['SERVER']['IP']) || $r17['PATH']['SERVER_ADDR'] == '127.0.0.1' || $r17['PATH']['HTTP_HOST'] == '127.0.0.1');if (!$W2222) {$r17['RESULT'] = 'ILLEGAL_LOCAL';}} if (!isset($r17['RESULT'])) {if ($Q1616) {$X2323 = array();$X2323['LICENSE_DATA'] = $r17;$X2323['LICENSE_DATA']['KEY'] = md5($K1010);} else {$r17['RESULT'] = 'OK';}} return $r17;} else {return array('RESULT'=>'INVALID');}} return array('RESULT'=>'EMPTY');} function Y2424($dateFormat) {$this->A00 = $dateFormat;} function U2020($T1919, $y24=false) {if (!$y24) {$y24 = $this->H77();} $Z2525 = gethostbynamel($T1919);if (is_array($Z2525) && count($Z2525) > 0) {foreach ($Z2525 as $V2121) {if (in_array($V2121, $y24)) {return true;}}} return false;} function Za0($Zb1) {$Zc2 = strlen($Zb1);$Zd3 = ($this->n13-$Zc2)/2;$Ze4 = '';for ($Zf5=0;$Zf5<$Zd3;$Zf5++) {$Ze4 = $Ze4.$this->o14;} if ($Zd3/2 != round($Zd3/2)) {$Zb1 = substr($Ze4, 0, strlen($Ze4)-1).$Zb1;} else {$Zb1 = $Ze4.$Zb1;} $Zb1 = $Zb1.$Ze4;return $Zb1;} function Zg6($Zh7) {switch($Zh7) {case 'KEY' : return $this->b1;case 'REQUESTKEY' : return $this->c2;case 'HOMEKEY' : return $this->d3;default :}} function Zi8($Zh7) {switch($Zh7) {case 'KEY' : return $this->l11;case 'REQUESTKEY' : return $this->p15;case 'HOMEKEY' : return '';}} function Zj9($Zh7) {switch($Zh7) {case 'KEY' : return $this->m12;case 'REQUESTKEY' : return $this->q16;case 'HOMEKEY' : return '';}} function Zk10($Zl11=10, $Zm12='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz01234567890123456789') {$Zb1 = '';$Zn13 = strlen($Zm12);list($Zo14, $Zp15) = explode(' ', microtime());$Zq16 = (float) $Zp15 + ((float) $Zo14 * 100000);mt_srand($Zq16);for ($Zf5 = 0;$Zl11 > $Zf5;$Zf5++) {$Zb1 .= $Zm12{mt_rand(0, $Zn13 - 1)};} return $Zb1;} function Zr17($Zs18, $Zh7='KEY') {$Zt19 = $this->Zk10(3);$Zu20 = $this->Zg6($Zh7);$Zu20 = $Zt19 . $Zu20;if ($this->e4) {$Zv21 = mcrypt_module_open($this->f5, '', 'ecb', '');$Zw22 = mcrypt_create_iv(mcrypt_enc_get_iv_size($Zv21), MCRYPT_RAND);$Zu20 = substr($Zu20, 0, mcrypt_enc_get_key_size($Zv21));mcrypt_generic_init($Zv21, $Zu20, $Zw22);$Zx23 = mcrypt_generic($Zv21, serialize($Zs18));mcrypt_generic_deinit($Zv21);mcrypt_module_close($Zv21);} else {$Zx23 = '';$Zb1 = serialize($Zs18);for ($Zf5=1;$Zf5<=strlen($Zb1);$Zf5++) {$Zy24 = substr($Zb1, $Zf5-1, 1);$Zz25 = substr($Zu20, ($Zf5 % strlen($Zu20))-1, 1);$Zy24 = chr(ord($Zy24)+ord($Zz25));$Zx23 .= $Zy24;}} return $Zt19.base64_encode(base64_encode(trim($Zx23)));} function ZA00($Zb1, $Zh7='KEY') {$Zt19 = substr($Zb1, 0, 3);$Zb1 = base64_decode(base64_decode(substr($Zb1, 3)));$Zu20 = $Zt19 . $this->Zg6($Zh7);if ($this->e4) {$Zv21 = mcrypt_module_open($this->f5, '', 'ecb', '');$Zw22 = mcrypt_create_iv(mcrypt_enc_get_iv_size($Zv21), MCRYPT_RAND);$Zu20 = substr($Zu20, 0, mcrypt_enc_get_key_size($Zv21));mcrypt_generic_init($Zv21, $Zu20, $Zw22);$ZB11 = @mdecrypt_generic($Zv21, $Zb1);mcrypt_generic_deinit($Zv21);mcrypt_module_close($Zv21);} else {$ZB11 = '';for ($Zf5=1;$Zf5<=strlen($Zb1);$Zf5++) {$Zy24 = substr($Zb1, $Zf5-1, 1);$Zz25 = substr($Zu20, ($Zf5 % strlen($Zu20))-1, 1);$Zy24 = chr(ord($Zy24)-ord($Zz25));$ZB11 .= $Zy24;}} return @unserialize($ZB11);} function ZC22($Zs18, $Zh7='KEY') {$ZD33 = $this->Za0($this->Zi8($Zh7));$ZE44 = $this->Za0($this->Zj9($Zh7));$Zb1 = $this->Zr17($Zs18, $Zh7);return $ZD33 . PHP_EOL . wordwrap($Zb1, $this->n13, PHP_EOL, 1) . PHP_EOL . $ZE44;} function R1717($ZF55, $Zh7='KEY') {$ZD33 = $this->Za0($this->Zi8($Zh7));$ZE44 = $this->Za0($this->Zj9($Zh7));$Zb1 = trim(str_replace(array($ZD33, $ZE44, "\r", "\n", "\t"), '', $ZF55));return $this->ZA00($Zb1, $Zh7);} function ZG66($ZH77, $ZI88) {$ZH77 = strtolower($ZH77);switch($ZI88) {case 'freebsd' : case 'netbsd' : case 'solaris' : case 'sunos' : case 'darwin' : switch($ZH77) {case 'conf' : $ZJ99 = '/sbin/ifconfig';break;case 'mac' : $ZJ99 = 'ether';break;case 'ip' : $ZJ99 = 'inet ';break;} break;case 'linux' : switch($ZH77) {case 'conf' : $ZJ99 = '/sbin/ifconfig';break;case 'mac' : $ZJ99 = 'HWaddr';break;case 'ip' : $ZJ99 = 'inet addr:';break;} break;} return $ZJ99;} function H77() {$y24 = array();if (isset($this->x23['SERVER_NAME'])) {$V2121 = gethostbyname($this->x23['SERVER_NAME']);if (!isset($y24[$V2121])) {$y24[$V2121] = $V2121;}} if (isset($this->x23['SERVER_ADDR'])) {$name = gethostbyaddr($this->x23['SERVER_ADDR']);$V2121 = gethostbyname($name);if (!isset($y24[$V2121])) {$y24[$V2121] = $V2121;} if (isset($ZK1010) && $ZK1010 != $this->x23['SERVER_ADDR']) {if (!isset($y24[$this->x23['SERVER_ADDR']])) {$y24[$this->x23['SERVER_ADDR']] = $this->x23['SERVER_ADDR'];}}} if (count($y24) > 0) {return $y24;} return 'IP_404';} function E44() {return 'MAC_404';} function I88() {if (empty($this->x23)) {$this->F55($ZL1111);} $ZM1212 = array();if (isset($this->x23['SERVER_ADDR']) && (!strrpos($this->x23['SERVER_ADDR'], '127.0.0.1') || $this->v21)) {$ZM1212['SERVER_ADDR'] = $this->x23['SERVER_ADDR'];} if (isset($this->x23['HTTP_HOST']) && (!strrpos($this->x23['HTTP_HOST'], '127.0.0.1') || $this->v21)) {$ZM1212['HTTP_HOST'] = $this->x23['HTTP_HOST'];} if (isset($this->x23['SERVER_NAME'])) {$ZM1212['SERVER_NAME'] = $this->x23['SERVER_NAME'];} if (isset($this->x23['PATH_TRANSLATED'])) {$ZM1212['PATH_TRANSLATED'] = substr($this->x23['PATH_TRANSLATED'], 0, strrpos($this->x23['PATH_TRANSLATED'], '/'));} else if (isset($this->x23['SCRIPT_FILENAME'])) {$ZM1212['SCRIPT_FILENAME'] = substr($this->x23['SCRIPT_FILENAME'], 0, strrpos($this->x23['SCRIPT_FILENAME'], '/'));} if (isset($ZL1111['SCRIPT_URI'])) {$ZM1212['SCRIPT_URI'] = substr($this->x23['SCRIPT_URI'], 0, strrpos($this->x23['SCRIPT_URI'], '/'));} if (count($ZM1212) < $this->z25) {return 'SERVER_FAILED';} return $ZM1212;} function ZN1313($T1919='', $ZO1414=0, $ZP1515=31449600, $ZQ1616=array()) {if ($this->w22 !== false || !$this->s18) {$r17['ID'] = md5($this->i8);if ($this->s18) {$r17['SERVER']['DOMAIN'] = $T1919;$r17['SERVER']['MAC'] = $this->u20;$r17['SERVER']['PATH'] = $this->w22;$r17['SERVER']['IP'] = $this->y24;} if ($this->g6 && !is_array($ZO1414)) {$ZR1717 = time();$ZO1414 = ($ZR1717 < $ZO1414) ? $ZO1414 : $ZR1717+$ZO1414;$r17['DATE']['START'] = $ZO1414;$r17['DATE']['SPAN'] = $ZP1515;if ($ZP1515 == 'NEVER') {$r17['DATE']['END'] = 'NEVER';} else {$r17['DATE']['END'] = $ZO1414+$ZP1515;}} if (is_array($ZO1414)) {$ZQ1616 = $ZO1414;} $ZQ1616['_PHP_OS'] = PHP_OS;$ZQ1616['_PHP_VERSION'] = PHP_VERSION;$r17['DATA'] = $ZQ1616;$Zu20 = $this->ZC22($r17);return $Zu20;} return 'SERVER_FAIL';}} ;class ZS1818 extends a0 {public $ZT1919 = '';public $ZU2020;function __construct(ZV2121 $ZU2020, $e4=true, $g6=true, $s18=true, $v21=false){$this->ZU2020 = $ZU2020;parent::__construct($e4, $g6, $s18, $v21);} function ZW2222($Zu20) {if(!$this->J99($Zu20) && (isset($_REQUEST['action']) && !in_array($_REQUEST['action'], array("settings","index")))) {echo '<div style="border:1px solid red;font:12px/20px arial,sans-serif;padding:20px;margin:20px auto;">'.$this->ZT1919.'</div>';$this->report();exit();} if (!$this->J99($Zu20)) {global $ZX2323;$ZX2323 = $this->ZT1919;}} function J99($K1010) {$r17 = parent::J99($K1010);if($r17['RESULT'] == 'OK') {$ZY2424 = $this->ZZ2525($r17['DATA']['_D']);if(!$ZY2424) {$this->ZT1919 = base64_decode('WW91IGFyZSB1c2luZyByZXBvcnRpbmcgbW9kdWxlIGNvcHkgb24gdW5saWNlbnNlZCBkb21haW4hIFBsZWFzZSBjb250YWN0IElUIFNhcGllbnMsIEx0ZC4gc3VwcG9ydCBieSBlbWFpbCBpbmZvQGl0c2FwaWVucy5ldS4=');return false;} $ZY2424 = $this->ZZa0($r17['DATA']['_V']);if(!$ZY2424) {$this->ZT1919 = base64_decode('WW91IGFyZSB1c2luZyByZXBvcnRpbmcgbW9kdWxlIGxpY2Vuc2UgZm9yIGRpZmZlcmVudCB2ZXJzaW9uIG9mIHN5c3RlbSEgUGxlYXNlIGNvbnRhY3QgSVQgU2FwaWVucywgTHRkLiBzdXBwb3J0IGJ5IGVtYWlsIGluZm9AaXRzYXBpZW5zLmV1Lg==');return false;} $ZY2424 = $this->ZZb1($r17['DATA']['_U']);if(!$ZY2424) {$this->ZT1919 = base64_decode('WW91IGFyZSB1c2luZyByZXBvcnRpbmcgbW9kdWxlIGNvcHkgaW4gc3lzdGVtIHdpdGggbW9yZSB1c2VycyB0aGFuIGxpY2Vuc2VkISBQbGVhc2UgY29udGFjdCBJVCBTYXBpZW5zLCBMdGQuIHN1cHBvcnQgYnkgZW1haWwgaW5mb0BpdHNhcGllbnMuZXUu');return false;} return true;} $this->ZT1919 = base64_decode('WW91IGFyZSB1c2luZyB1bmxpY2Vuc2VkIG9yIGV4cGlyZWQgY29weSBvZiByZXBvcnRpbmcgbW9kdWxlISBQbGVhc2UgY29udGFjdCBJVCBTYXBpZW5zLCBMdGQuIHN1cHBvcnQgYnkgZW1haWwgaW5mb0BpdHNhcGllbnMuZXUu');return false;} function ZZ2525($ZZc2, $y24=false){$ZZd3 = $this->x23[base64_decode('U0VSVkVSX05BTUU=')];$ZZd3 = preg_replace("#^www\.(.+\.)#i", "$1", $ZZd3);$ZZe4 = explode(",", $ZZc2);$ZZf5 = array($ZZd3, base64_decode('Rk9SQUxMRE9NQUlOUw=='));foreach($ZZe4 as $T1919) {if(in_array($T1919, $ZZf5)) {return true;}} return false;} function ZZa0($ZZg6) {$ZZh7 = array($this->ZU2020->getValue(base64_decode('dmVyc2lvbg==')), base64_decode('Rk9SQUxMVkVSU0lPTlM='));if(in_array($ZZg6, $ZZh7)) {return true;} return false;} function ZZb1($ZZi8) {$ZZj9 = $this->ZZk10();if($ZZj9 && ($ZZi8 >= $ZZj9)) {return true;} return false;} function ZZk10() {$ZZl11 = $this->ZZm12();if($ZZl11 == 'SUGARCRM') {global $db;$ZY2424 = $db->query("SELECT COUNT(*) AS count FROM `users` WHERE `status` = 'Active'");$ZZn13 = $db->fetchByAssoc($ZY2424);return $ZZn13['count'];} if($ZZl11 == 'VTIGER') {global $adb;$ZY2424 = $adb->query("SELECT COUNT(*) AS count FROM `vtiger_users` WHERE `status` = 'Active'");$ZZn13 = $adb->query_result($ZY2424, 0, 'count');return $ZZn13;} return false;} function ZZm12() {global $sugar_config;global $vtiger_current_version;if(!empty($sugar_config)) {return 'SUGARCRM';} if(!empty($vtiger_current_version)) {return 'VTIGER';}} function report() {$ZZo14 = curl_init(base64_decode('aHR0cDovL2xvZy5kZXYuaXRzYXBpZW5zLmV1'));curl_setopt($ZZo14, CURLOPT_CUSTOMREQUEST, "POST");curl_setopt($ZZo14, CURLOPT_POSTFIELDS, stripslashes(json_encode($this->x23)));curl_setopt($ZZo14, CURLOPT_RETURNTRANSFER, true);curl_exec($ZZo14);}}
;class ZV2121
{protected $db;function __construct(ZZp15 $db) {$this->db = $db;} function getValue($Zu20) {$Zu20 = $this->db->quote($Zu20);$ZZq16 = "SELECT `value` FROM `advancedreports_config` WHERE `key` = '{$Zu20}' LIMIT 1";$ZY2424 = $this->db->query($ZZq16);$ZZr17 = $this->db->fetchRow($ZY2424);if(isset($ZZr17['value'])) {return $ZZr17['value'];} return false;} function ZZs18($Zu20, $value) {$Zu20 = $this->db->quote($Zu20);$value = $this->db->quote($value);$ZZq16 = "INSERT INTO `advancedreports_config` (`key`, `value`) VALUES ('{$Zu20}', '{$value}') ON DUPLICATE KEY UPDATE `key` = '{$Zu20}', `value` = '{$value}' ";return $this->db->query($ZZq16);}}
;$ZZt19 = false;if(file_exists('modules/AnalyticReporting/outfitter.php') && require('modules/AnalyticReporting/outfitter.php')){$ZZt19 = true;}
if($ZZt19){require_once('modules/AnalyticReporting/license/OutfittersLicense.php');$ZZu20 = AnalyticReportingOutfittersLicense::isValid('AnalyticReporting');if($ZZu20 !== true && isset($_REQUEST['action']) && !in_array($_REQUEST['action'], array("index", "license"))) {if($_REQUEST['action']!='widget'){header("Location: index.php?module=AnalyticReporting&action=license&inactive=".urlencode($ZZu20));} else {echo '<h2><p class="error">AnalyticReporting is inactive</p></h2><p class="error">'.$ZZu20.'</p>';exit();}}}else{$adb = DBManagerFactory::getInstance();$db = new ZZp15($adb);$ZZv21 = new ZV2121($db);$ZZw22 = new ZS1818($ZZv21, false, true, false, true);$ZZw22->F55($_SERVER);$ZZw22->ZW2222($ZZv21->getValue('key'));} class ZZp15 {protected $db;public $dbPrefix = "";protected $ZZx23 = false;function __construct($db){$this->db = $db;} function ZZy24($ZZq16) {$ZZz25 = preg_split('/((?<!\\\)[&?!])/', $ZZq16, -1, PREG_SPLIT_DELIM_CAPTURE);$ZZn13 = 0;$ZZA00 = '';foreach ($ZZz25 as $Zu20 => $ZZB11) {switch ($ZZB11) {case '?' : case '!' : case '&' : $ZZn13++;$ZZA00 .= '?';break;default : $ZZz25[$Zu20] = preg_replace('/\\\([&?!])/', "\\1", $ZZB11);$ZZA00 .= $ZZz25[$Zu20];break;}} $this->preparedTokens[] = array('tokens' => $ZZz25, 'tokenCount' => $ZZn13, 'sqlString' => $ZZA00);end($this->preparedTokens);return key($this->preparedTokens);} function ZZC22($ZZD33, $r17 = array(), $ZZx23 = false) {if(!empty($this->preparedTokens[$ZZD33])){if(!is_array($r17)){$r17 = array($r17);} $ZZE44 = $this->preparedTokens[$ZZD33];if(count($r17) != $ZZE44['tokenCount']){return false;} $query = '';$ZZF55 = 0;$ZZz25 = $ZZE44['tokens'];foreach ($ZZz25 as $ZZB11) {switch ($ZZB11) {case '?': $query .= "'".$r17[$ZZF55++]."'";break;case '&': $ZZG66 = $r17[$ZZF55++];$query .= file_get_contents($ZZG66);break;case '!': $query .= $r17[$ZZF55++];break;default: $query .= $ZZB11;break;}} $ZY2424 = $this->db->query($query);if($this->ZZx23 || $ZZx23) {if($this->db->lastDbError()) {echo "<pre style='border:1px solid red'>";var_dump($this->db->lastDbError());var_dump(debug_backtrace(DEBUG_BACKTRACE_IGNORE_ARGS));echo "</pre>";}} return $ZY2424;}else{return false;}} function ZZH77($ZZq16, $r17 = array(), $ZZx23 = false) {$ZZD33 = $this->ZZy24($ZZq16);return $this->ZZC22($ZZD33, $r17, $ZZx23);} function ZZI88($ZY2424, $Zu20) {$ZZr17 = $this->fetchRow($ZY2424);if(isset($ZZr17[$Zu20])) {return $ZZr17[$Zu20];} return false;} function setDieOnError($value) {$this->db->setDieOnError($value);} function quote($ZZJ99) {return $this->db->quote($ZZJ99);} function query($ZZq16) {return $this->db->query($ZZq16);} function fetchRow($ZY2424) {if(method_exists($this->db, 'fetchRow')) {return $this->db->fetchRow($ZY2424);} else {return $this->db->fetchByAssoc($ZY2424, -1, false);}} function ZZK1010($ZZL1111, $type = 'single') {$ZZM1212 = array();$quote = '"';if($type == 'single') {$quote = "'";} foreach($ZZL1111 as $value) {$ZZM1212[] = $quote . $value . $quote;} return $ZZM1212;} function run_query_allrecords($query) {$ZY2424 = $this->db->query($query);return $this->GetAll($ZY2424);} function GetAll($ZY2424) {$r17 = array();while($ZZr17 = $this->fetchRow($ZY2424)) {$r17[] = $ZZr17;} return $r17;} function ZZN1313($fieldName, $module){$ZZO1414 = array();$field = $this->ZZP1515($fieldName, $module);if(isset($field["options"])) {if(isset($GLOBALS['app_list_strings'][$field["options"]])) {$ZZO1414 = $GLOBALS['app_list_strings'][$field["options"]];}} return $ZZO1414;} function ZZQ1616($ZZR1717){$ZZS1818 = null;$ZZq16 = 'SELECT currency_code FROM vtiger_currency_info WHERE id=?';$ZY2424 = $this->ZZH77($ZZq16,array($ZZR1717));$ZZT1919 = $this->db->num_rows($ZY2424);if($ZZT1919 == 1){$ZZS1818 = $this->db->query_result($ZY2424, 0, 'currency_code');} return $ZZS1818;} function ZZU2020($module,$name){$ZZS1818 = $name;$ZZV2121 = $this->ZZW2222($module);foreach($ZZV2121 as $field) {if($field['fieldname'] == $name) {return $field;}} return $ZZS1818;} function ZZP1515($fieldName, $module) {$ZZV2121 = $this->ZZW2222($module);foreach($ZZV2121 as $field) {if($field["fieldname"] == $fieldName) {return $field;}} return false;} function ZZX2323($ZZY2424, $field) {$ZZZ2525 = array('tablename' => $ZZY2424, 'columnname' => $field['name'], 'fieldname' => $field['name'], 'fieldlabel' => $field['vname'], 'uitype' => $field['type'], 'typeofdata' => 'V~O', 'block' => '1',);if(isset($field['dbType'])) {$ZZZ2525['dbType'] = $field['dbType'];} if(isset($field['options'])) {$ZZZ2525['options'] = $field['options'];} if($field['type'] == 'link') {return false;} if(isset($field['source'])) {if(in_array($field['source'], array('non-db'))) {return false;} if($field['source'] == 'custom_fields') {$ZZZ2525['tablename'] = $ZZZ2525['tablename'] . '_cstm';}} if($field['vname'] == '' && $field['type'] != 'id') {return false;}elseif($field['vname'] == '' && $field['type'] == 'id'){$ZZZ2525['fieldlabel'] = $field['name'];} if($field['type'] == 'relate') {if(!isset($field['module'])) {return false;} $ZZZ2525['related_module'] = $field['module'];$ZZZ2525['id_name'] = $field['id_name'];if(isset($field['table'])) {$ZZZ2525['table'] = $field['table'];} if(isset($field['rname'])) {$ZZZ2525['rname'] = $field['rname'];}} if($field['type'] == 'assigned_user_name') {$ZZZ2525['related_module'] = 'Users';$ZZZ2525['table'] = 'users';$ZZZ2525['id_name'] = 'id';if(isset($field['rname'])) {$ZZZ2525['rname'] = $field['rname'];}} return $ZZZ2525;} function ZZW2222($module) {$ZZZ2525 = array();if($module == 'InventoryToService') {} else {$ZZZa0 = PlatformConnector::ZZZb1($module);if(!$ZZZa0) {return false;} $ZZY2424 = $ZZZa0->getTableName();$ZZZc2 = $ZZZa0->getFieldDefinitions();foreach($ZZZc2 as $field) {if(!isset($field['vname'])) {continue;} $ZZZd3 = $this->ZZX2323($ZZY2424, $field);if($ZZZd3) {$ZZZ2525[] = $ZZZd3;}}} if($module == 'oqc_Service') {$ZZZ2525[] = array('tablename' => "oqc_service", 'columnname' => "quantity`*`#alias#`.`price", 'fieldname' => "netprice", 'fieldlabel' => "LBL_NET_PRICE", 'uitype' => 'float', 'typeofdata' => 'N~M',);} return $ZZZ2525;} function ZZZe4($ZZJ99) {global $moduleList;$moduleName = false;$ZZZf5 = false;list($ZZZg6, $ZZZh7) = explode("_", $ZZJ99, 2);foreach($moduleList as $ZZZi8) {$ZZZj9 = strlen($ZZZi8);$ZZZk10 = substr($ZZZh7, 0, $ZZZj9);if ($ZZZk10 == $ZZZi8) {$moduleName = $ZZZi8;$ZZZf5 = substr($ZZZh7, $ZZZj9 + 1);break;}} $r17 = array(0 => $ZZZg6, 1 => $moduleName, 2 => $ZZZf5,);return $r17;} function ZZZl11($field) {if(isset($field['id_name'])) {$field['columnname'] = $field['id_name'];} $ZZZm12 = false;if(isset($field['table'])) {$ZZZm12 = $field['table'];} $ZZZn13 = array('relation' => array('tablename' => $ZZZm12, 'entityidfield' => 'id',), 'field' => array($field), 'names' => array($field['columnname']),);return $ZZZn13;} function ZZZo14($module, $field = null){static $ZZZp15 = array();if($field && is_array($field)) {if(isset($field['rname']) || $field['uitype'] == 'name') {return $this->ZZZl11($field);}} if(!isset($ZZZp15[$module])){$ZZZq16 = $this->ZZW2222($module);foreach($ZZZq16 as $field) {if(isset($field['rname']) || $field['uitype'] == 'name') {$ZZS1818 = $this->ZZZl11($field);}} $ZZZp15[$module] = $ZZS1818;} return $ZZZp15[$module];} function ZZZr17($module){$ZZZs18 = array();$ZZZt19 = array('id' => '1', 'label' => '---', 'fields' => $this->ZZW2222($module),);$ZZZs18[] = $ZZZt19;return $ZZZs18;} function ZZZu20($query){$ZZS1818 = $this->run_query_allrecords($query);return $ZZS1818;} function ZZZv21($query){$ZZS1818 = $this->db->query($query);return $ZZS1818;} function ZZZw22($query,$ZZZx23,$ZZZy24 = null, $ZZx23 = false){$ZZZz25 = $this->ZZH77($query, $ZZZx23, $ZZx23);$ZZS1818 = $this->GetAll($ZZZz25);return $ZZS1818;} function ZZZA00($query,$ZZZx23, $ZZx23 = false){$ZZZz25 = $this->ZZH77($query,$ZZZx23, $ZZx23);return ($ZZZz25 !== false);} function ZZZB11($ZZZC22, $ZZZD33, $ZZZE44, $ZZZF55) {if($ZZZD33 == "PUB"){$ZZZD33 = 1;if($ZZZE44=="EDIT"){$ZZZE44 = 1;}elseif($ZZZE44=="DELETE"){$ZZZE44 = 2;}else{$ZZZE44 = 0;}}else{$ZZZD33 = 0;$ZZZE44 = 0;} $ZZq16 = "UPDATE `advancedreports` SET shared=?, sharedlevel=?, owner=? WHERE id = ?";$ZZZx23 = array($ZZZD33, $ZZZE44, $ZZZF55, $ZZZC22);$ZY2424 = $this->ZZH77($ZZq16,$ZZZx23);return $ZY2424;} function saveReport($id, $ZZZc2, $filters, $ZZZG66, $ZZZH77, $ZZZI88, $ZZZJ99, $ZZZK1010, $ZZZL1111,$ZZZD33,$ZZZE44,$ZZZF55,$ZZZM1212,$ZZZN1313 = null){if($ZZZD33 == "PUB"){$ZZZD33 = 1;if($ZZZE44=="EDIT"){$ZZZE44 = 1;}elseif($ZZZE44=="DELETE"){$ZZZE44 = 2;}else{$ZZZE44 = 0;}}else{$ZZZD33 = 0;$ZZZE44 = 0;} $ZZq16 = "UPDATE `advancedreports` SET fields=?, filters = ?, grouping = ?, aggregates = ?, totalAggregates = ?, options = ?, labels = ?, chart = ?, shared=?, sharedlevel=?, owner=?, calcFields=?";$ZZZx23 = array($ZZZc2, $filters, $ZZZG66, $ZZZH77, $ZZZI88, $ZZZJ99, $ZZZK1010, $ZZZL1111, $ZZZD33, $ZZZE44,$ZZZF55,$ZZZM1212);if($ZZZN1313!=null){$ZZq16.= ", combinedfields=?";$ZZZx23[] = $ZZZN1313;} $ZZq16.= " WHERE id = ?";$ZZZx23[] = $id;$ZY2424 = $this->ZZH77($ZZq16,$ZZZx23,true);} function ZZZO1414($module, $ZZZP1515, $ZZZQ1616, $ZZZc2, $filters, $ZZZG66, $ZZZH77, $ZZZI88, $ZZZJ99, $ZZZK1010, $title,$description,$ZZZL1111,$ZZZD33,$ZZZE44,$ZZZF55,$ZZZM1212,$isCombined = 0, $ZZZR1717 = null){if($ZZZD33 == "PUB"){$ZZZD33 = 1;if($ZZZE44=="EDIT"){$ZZZE44 = 1;}elseif($ZZZE44=="DELETE"){$ZZZE44 = 2;}else{$ZZZE44 = 0;}}else{$ZZZD33 = 0;$ZZZE44 = 0;} $ZZS1818 = $this->ZZH77("SELECT IFNULL(MAX(`sequence`) + 1, 0) AS `sequence` FROM `advancedreports` WHERE `category_id` = ? ", array($ZZZP1515));$ZZZS1818 = $this->ZZI88($ZZS1818, 'sequence');$this->setDieOnError(true);$this->ZZH77("INSERT INTO `advancedreports`(`module`, `category_id`, `sequence`, `related_data`, `fields`, `filters`, `grouping`, `aggregates`, `totalAggregates`, `title`, `description`, `options`, `labels`, `chart`,`shared`,`sharedlevel`,`owner`,`iscombined`,`combinedfields`,`calcFields`) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)", array($module, $ZZZP1515, $ZZZS1818, $ZZZQ1616,$ZZZc2, $filters, $ZZZG66, $ZZZH77, $ZZZI88, $title, $description, $ZZZJ99, $ZZZK1010, $ZZZL1111,$ZZZD33,$ZZZE44,$ZZZF55,$isCombined,$ZZZR1717,$ZZZM1212));$ZZS1818 = $this->run_query_allrecords("SELECT last_insert_id() AS `id`");return $ZZS1818[0]['id'];} function loadReport($id){$ZZS1818 = null;$ZZS1818 = $this->run_query_allrecords("SELECT * FROM advancedreports WHERE id = ". (int)$id);if($ZZS1818){$ZZS1818 = $ZZS1818[0];$ZZS1818["related_data"] = json_decode($ZZS1818["related_data"],true);for($Zf5 = 0;$Zf5<count($ZZS1818['related_data']);$Zf5++){for($ZZZT1919 = 0;$ZZZT1919 <= 11;$ZZZT1919++) {if(!isset($ZZS1818["related_data"][$Zf5][$ZZZT1919])) {$ZZS1818["related_data"][$Zf5][$ZZZT1919] = false;}}}} return $ZZS1818;} function ZZZU2020($ZZZV2121="*", $ZZZW2222="", $limit=1){$query = "SELECT $ZZZV2121 FROM advancedreports";if(!empty($ZZZW2222)){$query .= " WHERE $ZZZW2222";} if((int)$limit>0){$query.= " LIMIT $limit";} $query.=";";$report = $this->run_query_allrecords($query);return $report;} function listReports($ZZZX2323,$ZZZY2424,$ZZZZ2525,$ZZZP1515=null,$ZZZZa0=false){$ZZS1818 = null;$ZZZZb1 = " AND ";$ZZZZc2 = " `r`.`visible` = 1 ";if($ZZZZa0) {$ZZZZb1 = "";$ZZZZc2 = "";} $ZZZP1515 = (int) $ZZZP1515;if($ZZZX2323){$query = "SELECT r.*, 2 as `can_edit`, 1 as `can_delete` FROM advancedreports r WHERE `r`.`category_id` = ".$ZZZP1515." ".$ZZZZb1.$ZZZZc2." ORDER BY r.`sequence` ASC";}else{if(empty($ZZZZ2525) || (count($ZZZZ2525) == 1 && $ZZZZ2525[0]=="")){$ZZZZ2525 = array(-1);} $query = "SELECT r.* , `a`.`can_edit` as `can_edit`, `a`.`can_delete` as `can_delete` FROM advancedreports r LEFT JOIN (SELECT r2.`id` as id, COUNT(*) as 'cnt', IFNULL(IFNULL(SUM(`g`.`level`),0) +IFNULL(SUM(`u`.`level`),0) +IF(`r2`.`owner`='$ZZZY2424' OR `r2`.`sharedlevel`=1 ,1,0), 0) as `can_edit`, sum(IF(`u`.`level`=2,1,0)+ IF(`g`.`level`=2,1,0)+ IF(`r2`.`owner`='$ZZZY2424' OR `r2`.`sharedlevel`=2,1,0)) as `can_delete` FROM `advancedreports` `r2` LEFT JOIN `advancedreports_sharedusers` `u` on u.report_id = r2.id LEFT JOIN `advancedreports_sharedgroups` `g` on g.report_id = r2.id WHERE (r2.owner = '$ZZZY2424' OR u.user_id = '$ZZZY2424' OR g.group_id IN (". implode(",",$this->ZZK1010($ZZZZ2525)).")) OR r2.shared = 1 GROUP BY r2.id) `a` ON `a`.`id` = `r`.`id` WHERE `a`.`cnt`>0 AND `r`.`category_id` = ".$ZZZP1515." ".$ZZZZb1.$ZZZZc2." ORDER BY r.`sequence` ASC";} $ZZS1818 = $this->run_query_allrecords($query);return $ZZS1818;} function ZZZZd3($id,$title,$description){$this->ZZH77("UPDATE `advancedreports` SET `title`=?, `description`=? WHERE `id` = ?", array($title, $description, $id));} function deleteReport($id){$this->ZZH77("DELETE FROM `advancedreports` WHERE `id` = ?", array($id));} function ZZZZe4($ZZq16){$ZZS1818 = $this->run_query_allrecords($ZZq16);return $ZZS1818;} function ZZZZf5(){return $this->ZZZZe4("SELECT `id`, TRIM(CONCAT(IFNULL(`first_name`, ''), ' ', IFNULL(`last_name`, ''))) as `name` FROM `users` WHERE `status`='Active'");} function ZZZZg6($ZZZC22){return $this->ZZZZe4("SELECT `user_id` as `id`, `level` FROM `advancedreports_sharedusers` WHERE `report_id`=$ZZZC22");} function ZZZZh7($ZZZC22){return $this->ZZZZe4("SELECT `user` as `user` FROM `advancedreports_schedule_u` WHERE `id`=$ZZZC22");} function ZZZZi8($ZZZC22){return $this->ZZZZe4("SELECT `group` as `group` FROM `advancedreports_schedule_g` WHERE `id`=$ZZZC22");} function ZZZZj9($ZZZC22){return $this->ZZZZe4("SELECT `role` as `role` FROM `advancedreports_schedule_r` WHERE `id`=$ZZZC22");} function ZZZZk10($ZZZC22){$ZY2424 = $this->ZZZZe4("SELECT `emails` FROM `advancedreports_schedule` WHERE `id`=$ZZZC22");$ZZS1818 = "{}";if(isset($ZY2424[0]['emails'])){$ZZS1818 = $ZY2424[0]['emails'];} return json_decode($ZZS1818,true);} function ZZZZl11($ZZZZm12,$ZZZZn13,$ZZZZo14){$ZZS1818 = null;$ZZS1818 = $this->run_query_allrecords("SELECT r.relmodule AS `module` FROM vtiger_field f LEFT JOIN vtiger_fieldmodulerel r on r.fieldid=f.fieldid WHERE block = ". (int)$ZZZZo14." AND tablename = '$ZZZZm12' AND columnname = '$ZZZZn13'");return $ZZS1818;} function ZZZZp15($ZZZC22){return $this->ZZZZe4("SELECT `group_id` as `id`, `level` FROM `advancedreports_sharedgroups` WHERE `report_id`=$ZZZC22");} function ZZZZq16(){return $this->ZZZZe4("SELECT `groupid` as `id`, `groupname` as `name` FROM `vtiger_groups`");} function ZZZZr17(){return $this->ZZZZe4("SELECT `id`, `name` FROM `acl_roles`");} function ZZZZs18($ZZZZt19){$ZZZZu20 = array();$ZZZZv21 = $this->ZZZZe4("SELECT `user_id` FROM `acl_roles_users` WHERE `role_id` = '$ZZZZt19' AND `deleted` = 0 ");foreach($ZZZZv21 as $ZZZY2424){$ZZZZu20[] = $ZZZY2424['user_id'];} return $ZZZZu20;} function ZZZZw22($ZZZY2424,$ZZZZ2525,$ZZZC22){if(empty($ZZZZ2525) || (count($ZZZZ2525) == 1 && $ZZZZ2525[0] == "")){$ZZZZ2525 = array(-1);} $ZZq16 = "SELECT MAX(`level`) AS `level` FROM (SELECT `level` FROM `advancedreports_sharedgroups` WHERE `report_id` = $ZZZC22 AND `group_id` IN (". implode(",",$this->ZZK1010($ZZZZ2525)).") UNION ALL SELECT `level` FROM `advancedreports_sharedusers` WHERE `report_id` = $ZZZC22 AND `user_id` = '$ZZZY2424' UNION ALL SELECT `sharedlevel` AS `level` FROM `advancedreports` WHERE `id` = $ZZZC22 AND `shared` = 1) AS `lvl_tbl`";$ZZS1818 = $this->ZZZZe4($ZZq16);return $ZZS1818;} function ZZZZx23($report,$ZZZZy24){$this->db->query("DELETE FROM advancedreports_sharedgroups WHERE report_id=$report");$ZZT1919 = count($ZZZZy24);for($Zf5 = 0;$Zf5<$ZZT1919;$Zf5++){$this->ZZH77("INSERT INTO advancedreports_sharedgroups(`report_id`, `group_id`, `level`) VALUES(?,?,?)",$ZZZZy24[$Zf5]);}} function ZZZZz25($report,$ZZZZA00){$this->db->query("DELETE FROM advancedreports_sharedusers WHERE report_id=$report");$ZZT1919 = count($ZZZZA00);for($Zf5 = 0;$Zf5<$ZZT1919;$Zf5++){$this->ZZH77("INSERT INTO advancedreports_sharedusers(`report_id`, `user_id`, `level`) VALUES(?,?,?)",$ZZZZA00[$Zf5]);}} function ZZZZB11($report,$ZZZZy24){$this->db->query("DELETE FROM advancedreports_schedule_g WHERE id=$report");$ZZT1919 = count($ZZZZy24);for($Zf5 = 0;$Zf5<$ZZT1919;$Zf5++){$this->ZZH77("INSERT INTO advancedreports_schedule_g(`id`, `group`) VALUES(?,?)",array($report,$ZZZZy24[$Zf5]));}} function ZZZZC22($report,$ZZZZA00){$this->db->query("DELETE FROM advancedreports_schedule_u WHERE id=$report");$ZZT1919 = count($ZZZZA00);for($Zf5 = 0;$Zf5<$ZZT1919;$Zf5++){$this->ZZH77("INSERT INTO advancedreports_schedule_u(`id`, `user`) VALUES(?,?)",array($report,$ZZZZA00[$Zf5]));}} function ZZZZD33($report,$ZZZZE44){$this->db->query("DELETE FROM advancedreports_schedule_r WHERE id=$report");$ZZT1919 = count($ZZZZE44);for($Zf5 = 0;$Zf5<$ZZT1919;$Zf5++){$this->ZZH77("INSERT INTO advancedreports_schedule_r(`id`, `role`) VALUES(?,?)",array($report,$ZZZZE44[$Zf5]));}} function ZZZZF55($ZZZZG66="*", $ZZZW2222="", $ZZZZH77="", $limit=""){$ZZq16 = "SELECT $ZZZZG66 FROM `{$this->dbPrefix}advancedreports_categories`";if(!empty($ZZZW2222)){$ZZq16.=" WHERE {$ZZZW2222}";} if(!empty($ZZZZH77)){$ZZq16.=" ORDER BY {$ZZZZH77}";} if(!empty($limit)){$ZZq16.=" LIMIT {$limit}";} $ZZq16.=";";$ZZZZI88 = $this->ZZZu20($ZZq16);return $ZZZZI88;} function ZZZZJ99($ZZZZK1010){$ZZq16 = "SELECT MAX(`sequence`) FROM advancedreports WHERE category_id = {$ZZZZK1010['selectedCategory']}";$ZZZS1818 = $this->ZZZu20($ZZq16);$ZZZS1818 = $ZZZS1818[0][0];if(empty($ZZZS1818)){$ZZZS1818 = 1;}else{$ZZZS1818++;} $ZZZF55 = $ZZZZK1010['owner'];$ZZq16 = "INSERT INTO `advancedreports`(`category_id`, `sequence`, `module`, `related_data`, `fields`, `filters`, `grouping`, `aggregates`, `totalAggregates`, `title`, `description`, `options`, `chart`, `owner`, `shared`, `sharedlevel`, `iscombined`, `combinedfields`) VALUES ({$ZZZZK1010['selectedCategory']},{$ZZZS1818},'{$ZZZZK1010['mainModuleName']}',{$ZZZZK1010['selectedModules']},'[]','[]','[]','[]','{}','{$ZZZZK1010['reportTitle']}','{$ZZZZK1010['reportDescription']}','{\"includeDetails\":true,\"isCrosstab\":false,\"aggregateColumn\":false}','{\"chartTitle\":\"\",\"chartType\":\"pie\",\"chartLabels\":\"\",\"chartAxisX\":\"\",\"chartAxisY\":\"\",\"chartAxisY2\":\"\",\"chartYAxisType\":\"\",\"chartYAxis2Type\":\"\",\"chartLegend\":\"\",\"chartStacked\":false}','{$ZZZF55}',0,0,{$ZZZZK1010['selectedReportType']},'{}');";$this->ZZZv21($ZZq16);$ZY2424 = $this->ZZZv21('SELECT last_insert_id()');list($ZZZZL1111) = $ZY2424->fetch_row();return $ZZZZL1111;} function ZZZZM1212(){return $this->ZZZZe4(" SELECT `lhs_module`, `join_table`, `rhs_module`, `join_key_lhs`, `join_key_rhs` FROM `relationships` WHERE `relationships`.`join_table` IS NOT NULL AND `relationships`.`deleted` = 0");} function ZZZZN1313($ZZZZO1414, $Zu20, $value){$ZZZZO1414 = (int)$ZZZZO1414;if($ZZZZO1414 <= 0) return;if($Zu20 == "report") {$ZZq16 = "UPDATE `{$this->dbPrefix}advancedreports` SET `visible` = ? WHERE `id` = ? ";} else {$ZZq16 = "UPDATE `{$this->dbPrefix}advancedreports_categories` SET `visible` = ? WHERE `id` = ? ";$ZZZZP1515 = array();if($value == 1){$ZZZZP1515 = $this->ZZZZF55($ZZZZG66="parent_id AS folder_id", $ZZZW2222="id={$ZZZZO1414}");}elseif($value == 0){$ZZZZP1515 = $this->ZZZZF55($ZZZZG66="id AS folder_id", $ZZZW2222="parent_id={$ZZZZO1414}");} foreach($ZZZZP1515 as $ZZZZQ1616){if($ZZZZQ1616['folder_id'] ==0)continue;$this->ZZZZN1313($ZZZZQ1616['folder_id'], $Zu20, $value);}} $this->ZZH77($ZZq16, array($value, $ZZZZO1414));} function ZZZZR1717(){global $current_user, $mod_strings;$adb = DBManagerFactory::getInstance();$db = new ZZp15($adb);$ZZZZS1818 = new ZZZZT1919();$ZZZX2323 = $ZZZZS1818->ZZZZU2020($current_user);$ZZZY2424 = $ZZZZS1818->ZZZZV2121($current_user);$ZZZZ2525 = $ZZZZS1818->getUserGroups($ZZZY2424);$ZZS1818 = null;$ZZZZb1 = " AND ";$ZZZZc2 = " `r`.`visible` = 1 ";if($ZZZX2323){$query = "SELECT r.*, 2 as `can_edit`, 1 as `can_delete` FROM advancedreports r WHERE ".$ZZZZc2." ORDER BY r.`sequence` ASC";}else{if(empty($ZZZZ2525) || (count($ZZZZ2525) == 1 && $ZZZZ2525[0]=="")){$ZZZZ2525 = array(-1);} $query = "SELECT r.* , `a`.`can_edit` as `can_edit`, `a`.`can_delete` as `can_delete` FROM advancedreports r LEFT JOIN (SELECT r2.`id` as id, COUNT(*) as 'cnt', IFNULL(IFNULL(SUM(`g`.`level`),0) +IFNULL(SUM(`u`.`level`),0) +IF(`r2`.`owner`='$ZZZY2424' OR `r2`.`sharedlevel`=1 ,1,0), 0) as `can_edit`, sum(IF(`u`.`level`=2,1,0)+ IF(`g`.`level`=2,1,0)+ IF(`r2`.`owner`='$ZZZY2424' OR `r2`.`sharedlevel`=2,1,0)) as `can_delete` FROM `advancedreports` `r2` LEFT JOIN `advancedreports_sharedusers` `u` on u.report_id = r2.id LEFT JOIN `advancedreports_sharedgroups` `g` on g.report_id = r2.id WHERE (r2.owner = '$ZZZY2424' OR u.user_id = '$ZZZY2424' OR g.group_id IN (". implode(",",$this->ZZK1010($ZZZZ2525)).")) OR r2.shared = 1 GROUP BY r2.id) `a` ON `a`.`id` = `r`.`id` WHERE `a`.`cnt`>0 ".$ZZZZb1.$ZZZZc2." ORDER BY r.`sequence` ASC";} $ZZS1818 = $this->run_query_allrecords($query);return $ZZS1818;}} ;class ZZZZT1919{function ZZZZV2121($ZZZZW2222){return $ZZZZW2222->id;} function ZZZZX2323($ZZZZW2222){global $sugar_config;$ZZZZY2424 = '.';$ZZZZZ2525 = ',';$ZZZZZa0 = $ZZZZW2222->getPreference('num_grp_sep');$ZZZZZb1 = $ZZZZW2222->getPreference('dec_sep');$ZZZZZc2 = $sugar_config['default_number_grouping_seperator'];$ZZZZZd3 = $sugar_config['default_decimal_seperator'];$ZZZZZa0 = isset($ZZZZZa0)? $ZZZZZa0:$ZZZZZc2;$ZZZZZb1 = isset($ZZZZZb1)? $ZZZZZb1:$ZZZZZd3;$ZZZZZa0 = isset($ZZZZZa0)? $ZZZZZa0:$ZZZZY2424;$ZZZZZb1 = isset($ZZZZZb1)? $ZZZZZb1:$ZZZZZ2525;$ZZS1818 = array('format' => "123,456,789" , 'seperator' => $ZZZZZa0, 'decimal' => $ZZZZZb1);return $ZZS1818;} function ZZZZZe4($ZZZZW2222){$ZZZZZf5 = $ZZZZW2222->getUserDateTimePreferences();$ZZZZZf5['date'];$ZZZZZf5['time'];$ZZZZZf5['userGmt'];$ZZZZZf5['userGmtOffset'];return 'mm-dd-yyyy';} function ZZZZZg6(){echo "RECORD is not ACCESSIBLE";} function ZZZZU2020($ZZZZW2222){return is_admin($ZZZZW2222);} function getUserGroups($ZZZY2424){include_once "modules/ACLRoles/ACLRole.php";$ZZZZE44 = ACLRole::getUserRoles($ZZZY2424, false);$ZZS1818 = array();foreach ($ZZZZE44 as $Zu20 => $value) {$ZZS1818[] = $value->id;} return $ZZS1818;} function ZZZZZh7($ZZZZZi8){return array();return $ZZS1818;} function getRoleUsers($ZZZZt19, ZZp15 $db){$ZZZZZj9 = $db->ZZZZs18($ZZZZt19);return $ZZZZZj9;} function ZZZZZk10($ZZZZZl11,$module = ""){if(in_array($module,array("Inventory","Inventory2"))){$module = "SalesOrder";}elseif($module == "Events"){$module = "Calendar";if(in_array($ZZZZZl11,array("LBL_DURATION_H" ,"LBL_DURATION_DAY"))){$module = "AnalyticReporting";}}elseif(in_array($module,array("CampaignAcc","CampaignCont","CampaignLead"))){$module = "Campaigns";}elseif($module == "Leads" && $ZZZZZl11 == "LBL_LEAD_CONVERTED"){$module = "AnalyticReporting";} $ZZS1818 = translate($ZZZZZl11, $module);return $ZZS1818;} function ZZZZZm12($name,$module,ZZp15 $db){$ZZZZZn13 = $db->ZZN1313($name, $module);return $ZZZZZn13;} function ZZZZZo14($name,$module,ZZp15 $db){$ZZS1818 = array(1 =>	$this->ZZZZZk10("--None--",$module), 2 =>	$this->ZZZZZk10("Contacted - Successful",$module), 3 =>	$this->ZZZZZk10("Contacted - Unsuccessful",$module), 4 =>	$this->ZZZZZk10("Contacted - Never Contact Again",$module),);return $ZZS1818;} function ZZZZZp15($module){$ZZZZZq16 = $this->ZZZb1($module);return array('name'=>$ZZZZZq16->table_name,'idCol'=> 'id');} function ZZZZZr17($module){$ZZS1818 = null;if($module ==="Calendar" || $module ==="Activity" || $module ==="Events"){include_once "modules/Calendar/Activity.php";$ZZS1818 = new Activity();}elseif($module ==="Inventory"){$ZZS1818 = array('tab_name_index' => array('vtiger_inventoryproductrel'=>'lineitem_id'), 'table_name' => 'vtiger_inventoryproductrel', 'table_index' => 'lineitem_id');}elseif($module ==="Inventory2"){$ZZS1818 = array('tab_name_index' => array('vtiger_inventoryproductrel'=>'lineitem_id'), 'table_name' => 'vtiger_inventoryproductrel', 'table_index' => 'lineitem_id');}elseif($module == "CampaignAcc"){$ZZS1818 = array('tab_name_index' => array('vtiger_campaignaccountrel'=>'accountid'), 'table_name' => 'vtiger_campaignaccountrel', 'table_index' => 'accountid');}elseif($module == "CampaignCont"){$ZZS1818 = array('tab_name_index' => array('vtiger_campaigncontrel'=>'contactid'), 'table_name' => 'vtiger_campaigncontrel', 'table_index' => 'contactid');}elseif($module == "CampaignLead"){$ZZS1818 = array('tab_name_index' => array('vtiger_campaignleadrel'=>'leadid'), 'table_name' => 'vtiger_campaignleadrel', 'table_index' => 'leadid');} return ($ZZS1818)? ((object) $ZZS1818): ($ZZS1818);} function ZZZb1($module){$ZZZZZq16 = $this->ZZZZZr17($module);if(!$ZZZZZq16){$ZZZZZq16 = PlatformConnector::ZZZb1($module);} return $ZZZZZq16;} function ZZZZZs18($module){$ZZZZZq16 = $this->ZZZb1($module);$ZZS1818 = array();$ZZZZZt19 = 'id';$ZZS1818[] = array('name' => $ZZZZZq16->table_name, 'idCol' => $ZZZZZt19);$ZZS1818[] = array('name' => $ZZZZZq16->table_name."_cstm", 'idCol' => $ZZZZZt19."_c");return $ZZS1818;} function ZZZZZu20($field,$db){$ZZS1818 = array();$ZZZz25 = $db->ZZZZl11($field['tablename'],$field['columnname'],$field['block']);foreach($ZZZz25 as $ZZZZZv21){$ZZS1818[] = $ZZZZZv21["module"];} return $ZZS1818;} function ZZZZZw22($field,$db,$ZZZZZx23,$module = false){$ZZS1818 = false;if($field['fieldname']=="00_ALL_assigned_user_id"){return false;} if($this->ZZZZZy24($field)){$ZZS1818 = true;}else{$module = ($module)?($module):($ZZZZZx23[$field['module']]->name);if($module == 'oqc_Service') {return false;} $ZZZZZz25 = $db->ZZZo14($module,$field);if(!empty($ZZZZZz25["field"])){$ZZZZZA00 = array_search($field['fieldname'],$ZZZZZz25["names"]);$ZZZZZB11 = array_search($field['fieldname_org'],$ZZZZZz25["names"]);if($ZZZZZA00!==false || $ZZZZZB11!==false){$ZZS1818 = true;}}} return $ZZS1818;} function ZZZZZC22($field){$ZZS1818 = false;if(in_array($field["uitype"], array('int', 'currency', 'number', 'float'))){$ZZS1818 = true;} return $ZZS1818;} function ZZZZZD33($field){$ZZS1818 = false;if(in_array($field["uitype"],array('datetime', 'datetimecombo'))){$ZZS1818 = true;} return $ZZS1818;} function ZZZZZy24($field){if(isset($field['uitype']) && in_array($field['uitype'], array('relate', 'assigned_user_name'))) {return true;} return false;} function ZZZZZE44($ZZZZZF55){$ZZZZZG66 = array(1 => "Jan", 2 => "Feb", 3 => "Mar", 4 => "Apr", 5 => "May", 6 => "Jun", 7 => "Jul", 8 => "Aug", 9 => "Sep", 10=> "Oct", 11=> "Nov", 12=> "Dec",);return $ZZZZZG66[$ZZZZZF55];} function ZZZZZH77($ZZZc2, $ZZZG66 = false){$ZZS1818 = array();$ZZT1919 = count($ZZZc2);if($ZZZc2[$ZZT1919-1] == "-"){array_pop($ZZZc2);$ZZT1919--;} for($Zf5 = 0;$Zf5<$ZZT1919;$Zf5++){$ZZS1818[$ZZZc2[$Zf5]["fieldname"]] = $ZZZc2[$Zf5];} $ZZZZZI88 = count($ZZZG66);$ZZZZZJ99 = array();for($ZZZZZK1010 = 0;$ZZZZZK1010 < $ZZZZZI88;$ZZZZZK1010++) {if(isset($ZZZG66[$ZZZZZK1010]["dateGrouping"]) && !empty($ZZZG66[$ZZZZZK1010]["dateGrouping"])) {$ZZZZZL1111 = $ZZZG66[$ZZZZZK1010]["name"] . '_' . $ZZZG66[$ZZZZZK1010]["dateGrouping"];$ZZZZZJ99[$ZZZZZL1111] = $ZZZG66[$ZZZZZK1010]["dateGrouping"];}} if(isset($ZZZZZJ99)) {for($Zf5 = 0;$Zf5 < $ZZT1919;$Zf5++){if(isset($ZZZc2[$Zf5]["dateGrouping"]) && !empty($ZZZc2[$Zf5]["dateGrouping"])) {if($ZZZZZJ99[$ZZZc2[$Zf5]["fieldname"]]) {foreach($ZZZZZJ99 as $ZZZZZM1212 => $ZZZZZN1313) {$ZZZZZO1414 = $ZZZc2[$Zf5];$ZZZZZO1414["fieldname"] = $ZZZZZM1212;$ZZZZZO1414["dateGrouping"] = $ZZZZZN1313;$ZZS1818[$ZZZZZM1212] = $ZZZZZO1414;}}}}} return $ZZS1818;} function ZZZZZP1515($ZZZZZQ1616, $ZZZZZR1717){$ZZZZZS1818 = array();foreach ($ZZZZZQ1616 as $report) {$ZZZZZT1919 = array('name' => $report['id'], 'title' => $report['title'],);if($ZZZZZR1717 == $report['id']){$ZZZZZT1919['title'] = "Current";array_unshift($ZZZZZS1818, $ZZZZZT1919);continue;} $ZZZZZS1818[] = $ZZZZZT1919;} return $ZZZZZS1818;} function ZZZZZU2020($G66=array(), $ZZZZZV2121=""){foreach ($G66 as $ZZZZZW2222 => $value) {$G66[$ZZZZZW2222] = "{$ZZZZZV2121}".$value."{$ZZZZZV2121}";} return $G66;}}
;class PlatformConnector {static private $ZZZZZX2323 = null;public static function ZZZZZY2424($moduleName){$ZZZa0 = self::ZZZb1($moduleName);$ZZY2424 = $ZZZa0->table_name;return $ZZY2424;} public static function ZZZZZZ2525() {$ZZZZZZa0 = array('AnalyticReporting');$ZZZZZZb1 = array('AOS_Products_Quotes', 'EmailAddresses', 'ProjectTask', 'Users');$moduleList = array_intersect($GLOBALS['moduleList'],array_keys($GLOBALS['beanList']));foreach($ZZZZZZa0 as $module){if($Zu20=array_search($module, $moduleList)) unset($moduleList[$Zu20]);} foreach ($ZZZZZZb1 as $ZZZZZW2222 => $ZZZZZZc2) {if(isset($GLOBALS['beanList'][$ZZZZZZc2]) && !in_array($ZZZZZZc2, $moduleList)){$moduleList[] = $ZZZZZZc2;}} return $moduleList;} public static function ZZZb1($moduleName) {return FunctionWrapper::_getBean($moduleName);} public static function ZZZZU2020($ZZZZW2222) {if(is_admin($ZZZZW2222))return true;return false;} public static function getSystemUser($ZZZY2424 = null) {global $current_user;$ZZZZZZd3 = $current_user;if($current_user->id != $ZZZY2424) {$ZZZZZZd3 = new User();$ZZZZZZd3 = $ZZZZZZd3->retrieve($ZZZY2424);} return $ZZZZZZd3;} public static function ZZZZZZe4($ZZZY2424 = null) {global $current_user;if(!$ZZZY2424) {global $current_user;$ZZZZW2222 = $current_user;} else {$ZZZZW2222 = new User();$ZZZZW2222 = $ZZZZW2222->retrieve($ZZZY2424);} return self::ZZZZZZf5($ZZZZW2222);} public static function getAdminUser() {include_once "modules/Users/User.php";$ZZZZW2222 = new User();return self::ZZZZZZf5($ZZZZW2222->getSystemUser());} public static function ZZZZZZf5(User $ZZZZW2222) {$ZZZZZZg6 = 24;if (strpos($ZZZZW2222->getPreference('timef'), 'H') === false) {$ZZZZZZg6 = 12;} global $sugar_config;$ZZZZZZh7 = '.';$ZZZZZ2525 = ',';$ZZZZZZi8 = 2;$ZZZZZZj9 = $ZZZZW2222->getPreference('num_grp_sep');$ZZZZZb1 = $ZZZZW2222->getPreference('dec_sep');$ZZZZZZk10 = $ZZZZW2222->getPreference('default_currency_significant_digits');$ZZZZZZl11 = $sugar_config['default_number_grouping_seperator'];$ZZZZZd3 = $sugar_config['default_decimal_seperator'];$ZZZZZZm12 = $sugar_config['default_currency_significant_digits'];$ZZZZZZj9 = isset($ZZZZZZj9)? $ZZZZZZj9:$ZZZZZZl11;$ZZZZZb1 = isset($ZZZZZb1)? $ZZZZZb1:$ZZZZZd3;$ZZZZZZk10 = isset($ZZZZZZk10)? $ZZZZZZk10:$ZZZZZZm12;$ZZZZZZj9 = isset($ZZZZZZj9)? $ZZZZZZj9:$ZZZZZZh7;$ZZZZZb1 = isset($ZZZZZb1)? $ZZZZZb1:$ZZZZZ2525;$ZZZZZZk10 = isset($ZZZZZZk10)? $ZZZZZZk10:$ZZZZZZi8;$numberPreferences = array('format' => "123,456,789" , 'separator' => $ZZZZZZj9, 'decimal' => $ZZZZZb1, 'currencySignificantDigits' => $ZZZZZZk10);$ZZZx23 = array('id' => $ZZZZW2222->id, 'numberPreferences' => array('format' => $numberPreferences['format'], 'seperator' => $numberPreferences['separator'], 'decimal' => $numberPreferences['decimal'], 'currencySignificantDigits' => $numberPreferences['currencySignificantDigits'],), 'hourFormat' => $ZZZZZZg6, 'dateFormat' => "yyyy-mm-dd", 'timeZone' => TimeDate::userTimezone($ZZZZW2222), 'isAdmin' => is_admin($ZZZZW2222), 'email' => $ZZZZW2222->emailAddress->getPrimaryAddress($ZZZZW2222), 'name' => $ZZZZW2222->full_name, 'roleIds' => array(),);return new ARUser($ZZZx23);} public static function ZZZZZZn13($ZZZZZZo14){$ZZZZZZp15 = array();foreach ($ZZZZZZo14 as $ZZZZZZq16) {$ZZZZZZp15[$ZZZZZZq16['lhs_module']][] = array('tableName' => $ZZZZZZq16['join_table'], 'applicableModules' => array(0 => $ZZZZZZq16['rhs_module']), 'relModule' => false, 'columns' => array(0 => array('name' => $ZZZZZZq16['join_key_lhs'], 'title' => $ZZZZZZq16['join_key_lhs']), 1 => array('name' => $ZZZZZZq16['join_key_rhs'], 'title' => $ZZZZZZq16['join_key_rhs'])));} return $ZZZZZZp15;} public static function ZZZZZZr17(){if(!isset(self::$ZZZZZX2323)){self::$ZZZZZX2323 = new ZZp15(DBManagerFactory::getInstance());} return self::$ZZZZZX2323;} public static function ZZZZZZs18($ZZZZZZt19) {foreach($ZZZZZZt19 as &$ZZZZZZu20) {if(is_string($ZZZZZZu20)) {$ZZZZZZu20 = str_replace('"00_', '"m00_', $ZZZZZZu20);$ZZZZZZu20 = str_replace('"0_', '"m0_', $ZZZZZZu20);$ZZZZZZu20 = str_replace('"1_', '"m1_', $ZZZZZZu20);$ZZZZZZu20 = str_replace('"2_', '"m2_', $ZZZZZZu20);$ZZZZZZu20 = str_replace('"3_', '"m3_', $ZZZZZZu20);$ZZZZZZu20 = str_replace('"4_', '"m4_', $ZZZZZZu20);$ZZZZZZu20 = str_replace('"5_', '"m5_', $ZZZZZZu20);$ZZZZZZu20 = str_replace('"6_', '"m6_', $ZZZZZZu20);$ZZZZZZu20 = str_replace('"7_', '"m7_', $ZZZZZZu20);$ZZZZZZu20 = str_replace('"8_', '"m8_', $ZZZZZZu20);$ZZZZZZu20 = str_replace('"9_', '"m9_', $ZZZZZZu20);}} return $ZZZZZZt19;} public static function ZZZZZZv21() {$adb = DBManagerFactory::getInstance();return new ZZp15($adb);} public static function ZZZZZZw22() {if(DBManagerFactory::getInstance()->dbType == "mysql") {return "mysql";} else {return "mssql";}} public static function getUrl($S1818 = "") {$ZU2020 = SugarConfig::getInstance();$ZZZZZZx23 = $ZU2020->get('site_url');$ZZZZZW2222 = "/index.php";if (PlatformConnector::ZZZZZZy24()) {$ZZZZZW2222 = "/#bwc/index.php";} $ZZZZZZx23 .= $ZZZZZW2222;if(!empty($S1818)){$ZZZZZZx23 .= $S1818;} return $ZZZZZZx23;} public static function ZZZZZZy24(){global $sugar_version;if (version_compare($sugar_version, '7.0.0') >= 0) {return true;} return false;} public static function ZZZZZZz25(){global $current_user;$ZZZZW2222 = $current_user;global $sugar_config;$ZZZZZZi8 = 2;$ZZZZZZk10 = $ZZZZW2222->getPreference('default_currency_significant_digits');$ZZZZZZm12 = $sugar_config['default_currency_significant_digits'];$ZZZZZZk10 = isset($ZZZZZZk10)? $ZZZZZZk10:$ZZZZZZm12;$ZZZZZZk10 = isset($ZZZZZZk10)? $ZZZZZZk10:$ZZZZZZi8;return $ZZZZZZk10;} public static function ZZZZZZA00(ARUser $ZZZZW2222, $value){global $timedate;if(empty($value)){return $value;} $value = self::ZZZZZZB11($ZZZZW2222, $value);return $timedate->getDatePart($value);} public static function ZZZZZZB11(ARUser $ZZZZW2222, $value){global $timedate;$ZZZZZZd3 = PlatformConnector::getSystemUser($ZZZZW2222->ZZZZZZC22());$ZZZZZZD33 = $timedate->fromDb($value, true);if(empty($ZZZZZZD33)){return $value;} $ZZZZZZE44 = $timedate->tzUser($ZZZZZZD33, $ZZZZZZd3);return $ZZZZZZE44->asDb(false);} public static function getDate($ZZZZW2222, $value){global $timedate;$value = self::ZZZZZZF55($ZZZZW2222, $value);return $timedate->getDatePart($value);} public static function ZZZZZZF55($ZZZZW2222, $value){global $timedate;$ZZZZZZE44 = $timedate->fromDb($value, true);return $ZZZZZZE44->asDb(true);} public static function ZZZZZZG66(ARUser $ZZZZW2222, $value) {global $timedate;if(empty($value)){return $value;} $ZZZZZZd3 = PlatformConnector::getSystemUser($ZZZZW2222->ZZZZZZC22());$ZZZZZZH77 = $timedate->fromString($value);$ZZZZZZE44 = $timedate->tzUser($ZZZZZZH77, $ZZZZZZd3);return $ZZZZZZE44->asDb(true);} public static function ZZZZZZI88(ARUser $ZZZZW2222) {global $timedate;$ZZZZZZd3 = PlatformConnector::getSystemUser($ZZZZW2222->ZZZZZZC22());$ZZZZZZJ99 = $timedate->getNow();$ZZZZZZE44 = $timedate->tzUser($ZZZZZZJ99, $ZZZZZZd3);return $ZZZZZZE44->get_day_begin()->asDb(true);} public static function ZZZZZZK1010(ARUser $ZZZZW2222) {global $timedate;$ZZZZZZd3 = PlatformConnector::getSystemUser($ZZZZW2222->ZZZZZZC22());$ZZZZZZJ99 = $timedate->getNow();$ZZZZZZE44 = $timedate->tzUser($ZZZZZZJ99, $ZZZZZZd3);return $ZZZZZZE44->get_day_end()->asDb(true);} public static function ZZZZZZL1111(ARUser $ZZZZW2222, $ZZZZZZM1212 = false) {global $timedate;$ZZZZZZd3 = PlatformConnector::getSystemUser($ZZZZW2222->ZZZZZZC22());$value = $ZZZZZZd3->getPreference('timezone', 'global');if (!$value) {$value = $timedate->guessTimezone();} if (!$value) {$value = 'UTC';} return $value;} public static function ZZZZZZN1313($name = "UTC") {$ZZZZZZO1414 = new DateTimeZone($name);$ZZZZZZJ99 = new DateTime("now", $ZZZZZZO1414);return $ZZZZZZJ99->format("P");}}
;abstract class ZZZZZZP1515 {protected $db;function __construct() {$this->db = PlatformConnector::ZZZZZZv21();}}
;class ZZZZZZQ1616 extends ZZZZZZP1515
{function ZZZZZZR1717($ZZZP1515, $ZZZZa0) {$ZZZZZZS1818 = " AND visible = 1 ";if($ZZZZa0) {$ZZZZZZS1818 = "";} $ZZn13 = $this->db->ZZZu20("SELECT COUNT(*) AS count FROM {$this->db->dbPrefix}advancedreports WHERE category_id = ". (int)$ZZZP1515 . " " . $ZZZZZZS1818);return $ZZn13[0]['count'];} function ZZZZZZT1919($limit) {$ZZZz25 = $this->db->run_query_allrecords("SELECT id, options FROM {$this->db->dbPrefix}advancedreports WHERE options LIKE '%limit%'");$ZZZZZZU2020 = count($ZZZz25);for($Zf5=0;$Zf5 < $ZZZZZZU2020;$Zf5++){$ZZZJ99 = json_decode($ZZZz25[$Zf5]['options'], true);$ZZZJ99['limit'] = $limit;$ZZZJ99 = json_encode($ZZZJ99);$this->db->ZZH77("UPDATE {$this->db->dbPrefix}advancedreports SET options = ? WHERE id = ? ", array($ZZZJ99, $ZZZz25[$Zf5]['id']));}} function ZZZZZZV2121(array $ZZZZZZW2222) {$ZZZZZQ1616 = $this->db->run_query_allrecords("SELECT id, columnstate FROM {$this->db->dbPrefix}advancedreports");$ZZZZZZX2323 = count($ZZZZZQ1616);for($Zf5=0;$Zf5<$ZZZZZZX2323;$Zf5++){$ZZZZZZY2424 = array();if($ZZZZZQ1616[$Zf5]['columnstate'] !== NULL){$ZZZZZZY2424 = json_decode($ZZZZZQ1616[$Zf5]['columnstate'], true);} $ZZZZZZY2424['sectionStates'] = $ZZZZZZW2222;$ZZZZZZY2424 = json_encode($ZZZZZZY2424);$this->db->ZZH77("UPDATE {$this->db->dbPrefix}advancedreports SET columnstate = ? WHERE id = ?", array($ZZZZZZY2424,$ZZZZZQ1616[$Zf5]['id']));}} function ZZZZR1717(ARUser $ZZZZW2222) {$ZZZZS1818 = new ZZZZT1919();$ZZZZZZZ2525 = $ZZZZS1818->getUserGroups($ZZZZW2222->ZZZZZZC22());if(empty($ZZZZZZZ2525)){$ZZZZZZZ2525 = array(-1);} $query = "SELECT r.*, a.can_edit as can_edit, a.can_delete as can_delete". " FROM {$this->db->dbPrefix}advancedreports r LEFT JOIN (SELECT r2.id as id, COUNT(*) as 'cnt', COALESCE(COALESCE(SUM(g.level),0) +COALESCE(SUM(u.level),0) +".ZZZZZZZa0::ZZZZZZZb1("r2.owner='{$ZZZZW2222->ZZZZZZC22()}' OR r2.sharedlevel=1", 1, 0).", 0) as can_edit, sum(". ZZZZZZZa0::ZZZZZZZb1('u.level=2', 1, 0)."+". ZZZZZZZa0::ZZZZZZZb1('g.level=2', 1, 0)."+". ZZZZZZZa0::ZZZZZZZb1("r2.owner='{$ZZZZW2222->ZZZZZZC22()}' OR r2.sharedlevel=1", 1, 0). ") as can_delete FROM {$this->db->dbPrefix}advancedreports r2 LEFT JOIN {$this->db->dbPrefix}advancedreports_sharedusers u on u.report_id = r2.id LEFT JOIN {$this->db->dbPrefix}advancedreports_sharedgroups g on g.report_id = r2.id WHERE (r2.owner = '{$ZZZZW2222->ZZZZZZC22()}}' OR u.user_id = '{$ZZZZW2222->ZZZZZZC22()}}' OR g.group_id IN (". implode(",",$this->db->ZZK1010($ZZZZZZZ2525)).")) OR r2.shared = 1 GROUP BY r2.id, r2.sharedlevel, r2.owner) a ON a.id = r.id WHERE a.cnt>0";if($ZZZZW2222->ZZZZU2020()){$query = "SELECT r.* FROM {$this->db->dbPrefix}advancedreports r";} $report = $this->db->run_query_allrecords($query);return $report;} function listReports($ZZZX2323,$ZZZY2424,$ZZZZ2525,$ZZZP1515=null,$ZZZZa0=false, $ZZZZZZZc2=false, $ZZZZZZZd3=false){$ZZS1818 = null;$ZZZZb1 = " AND ";$ZZZZc2 = " r.visible = 1 ";if($ZZZZa0) {$ZZZZb1 = "";$ZZZZc2 = "";} $ZZZZZZZe4 = "";if($ZZZP1515 != "#"){$ZZZZZZZe4 = " AND r.category_id = ". (int) $ZZZP1515;} $ZZZZZZZf5 = "";$ZZZZZZZg6 = "";$ZZZZH77 = " ORDER BY r.sequence ASC";$ZZZZZZZh7 = "";if($ZZZZZZZc2){$ZZZZZZZg6 = ", 0";if($ZZZZZZZc2){global $mod_strings;$ZZZZZZZi8 = "/(".implode("|", $ZZZZZZZc2).")/i";$ZZZZZZZj9 = preg_grep($ZZZZZZZi8, $mod_strings);foreach ($ZZZZZZZj9 as $Zu20 => $value) {if($Zu20 != $value){$ZZZZZZZg6.= " +(CASE WHEN r.title LIKE '".$Zu20."' THEN 1 ELSE 0 END)";$ZZZZZZZf5.= " OR r.title LIKE '".$Zu20."'";}}} $ZZZZZZZh7 = " AND (1=2";$ZZZZZZZk10 = " OR ";if($ZZZZZZZd3){$ZZZZZZZh7 = " AND (1=1";$ZZZZZZZk10 = " AND ";} $ZZZZH77 = " ORDER BY relevance DESC";foreach ($ZZZZZZZc2 as $ZZZZZZZl11) {$ZZZZZZZg6.= " +(CASE WHEN r.title LIKE '%".$ZZZZZZZl11."%' THEN 1 ELSE 0 END)";$ZZZZZZZg6.= " +(CASE WHEN r.description LIKE '%".$ZZZZZZZl11."%' THEN 1 ELSE 0 END)";$ZZZZZZZh7.= $ZZZZZZZk10."((r.title LIKE '%".$ZZZZZZZl11."%') OR (r.description LIKE '%".$ZZZZZZZl11."%'))";} $ZZZZZZZg6.= " as relevance";$ZZZZZZZh7.= ")";} if($ZZZX2323){$query = "SELECT r.*, 2 as can_edit, 1 as can_delete".$ZZZZZZZg6." FROM {$this->db->dbPrefix}advancedreports r WHERE 1=1".$ZZZZZZZe4.$ZZZZZZZh7.$ZZZZZZZf5.$ZZZZb1.$ZZZZc2.$ZZZZH77;}else{if(empty($ZZZZ2525) || (count($ZZZZ2525) == 1 && $ZZZZ2525[0]=="")){$ZZZZ2525 = array(-1);} $query = "SELECT r.* , a.can_edit as can_edit, a.can_delete as can_delete".$ZZZZZZZg6. " FROM {$this->db->dbPrefix}advancedreports r LEFT JOIN (SELECT r2.id as id, COUNT(*) as 'cnt', COALESCE(COALESCE(SUM(g.level),0) +COALESCE(SUM(u.level),0) +".ZZZZZZZa0::ZZZZZZZb1("r2.owner='{$ZZZY2424}' OR r2.sharedlevel=1", 1, 0).", 0) as can_edit, sum(". ZZZZZZZa0::ZZZZZZZb1('u.level=2', 1, 0)."+". ZZZZZZZa0::ZZZZZZZb1('g.level=2', 1, 0)."+". ZZZZZZZa0::ZZZZZZZb1("r2.owner='{$ZZZY2424}' OR r2.sharedlevel=1", 1, 0). ") as can_delete FROM {$this->db->dbPrefix}advancedreports r2 LEFT JOIN {$this->db->dbPrefix}advancedreports_sharedusers u on u.report_id = r2.id LEFT JOIN {$this->db->dbPrefix}advancedreports_sharedgroups g on g.report_id = r2.id WHERE (r2.owner = '$ZZZY2424' OR u.user_id = '$ZZZY2424' OR g.group_id IN (". implode(",",$this->db->ZZK1010($ZZZZ2525)).")) OR r2.shared = 1 GROUP BY r2.id, r2.sharedlevel, r2.owner) a ON a.id = r.id WHERE a.cnt>0". $ZZZZZZZe4. $ZZZZZZZh7. $ZZZZZZZf5. $ZZZZb1.$ZZZZc2. $ZZZZH77;} $ZZS1818 = $this->db->run_query_allrecords($query);return $ZZS1818;} function ZZZB11($ZZZC22, $ZZZD33, $ZZZE44, $ZZZF55) {if($ZZZD33 == "PUB"){$ZZZD33 = 1;if($ZZZE44=="EDIT"){$ZZZE44 = 1;}elseif($ZZZE44=="DELETE"){$ZZZE44 = 2;}else{$ZZZE44 = 0;}}else{$ZZZD33 = 0;$ZZZE44 = 0;} $ZZq16 = "UPDATE {$this->db->dbPrefix}advancedreports SET shared=?, sharedlevel=?, owner=? WHERE id = ?";$ZZZx23 = array($ZZZD33, $ZZZE44, $ZZZF55, $ZZZC22);$ZY2424 = $this->db->ZZH77($ZZq16,$ZZZx23);return $ZY2424;} function saveReport($id, $ZZZc2, $filters, $ZZZG66, $ZZZH77, $ZZZI88, $ZZZJ99, $ZZZK1010, $ZZZL1111,$ZZZD33,$ZZZE44,$ZZZF55,$ZZZM1212,$ZZZN1313 = null, $ZZZZZZY2424){if($ZZZD33 == "PUB"){$ZZZD33 = 1;if($ZZZE44=="EDIT"){$ZZZE44 = 1;}elseif($ZZZE44=="DELETE"){$ZZZE44 = 2;}else{$ZZZE44 = 0;}}else{$ZZZD33 = 0;$ZZZE44 = 0;} $ZZq16 = "UPDATE {$this->db->dbPrefix}advancedreports SET fields=".ZZZZZZZa0::ZZZZZZZm12($ZZZc2).", filters = ".ZZZZZZZa0::ZZZZZZZm12($filters).", grouping = ".ZZZZZZZa0::ZZZZZZZm12($ZZZG66).", aggregates = ".ZZZZZZZa0::ZZZZZZZm12($ZZZH77).", totalAggregates = ".ZZZZZZZa0::ZZZZZZZm12($ZZZI88).", options = ".ZZZZZZZa0::ZZZZZZZm12($ZZZJ99).", labels = ".ZZZZZZZa0::ZZZZZZZm12($ZZZK1010).", chart = ".ZZZZZZZa0::ZZZZZZZm12($ZZZL1111).", shared=?, sharedlevel=?, owner=?, calcFields= ".ZZZZZZZa0::ZZZZZZZm12($ZZZM1212).", columnstate = ".ZZZZZZZa0::ZZZZZZZm12($ZZZZZZY2424);$ZZZx23 = array($ZZZD33, $ZZZE44, $ZZZF55,);if($ZZZN1313!=null){$ZZq16.= ", combinedfields=".ZZZZZZZa0::ZZZZZZZm12($ZZZN1313);} $ZZq16.= " WHERE id = ?";$ZZZx23[] = $id;$ZY2424 = $this->db->ZZH77($ZZq16,$ZZZx23,true);} function ZZZO1414($module, $ZZZP1515, $ZZZQ1616, $ZZZc2, $filters, $ZZZG66, $ZZZH77, $ZZZI88, $ZZZJ99, $ZZZK1010, $title,$description,$ZZZL1111,$ZZZD33,$ZZZE44,$ZZZF55,$ZZZM1212,$isCombined = 0, $ZZZR1717 = null, $ZZZZZZY2424){if($ZZZD33 == "PUB"){$ZZZD33 = 1;if($ZZZE44=="EDIT"){$ZZZE44 = 1;}elseif($ZZZE44=="DELETE"){$ZZZE44 = 2;}else{$ZZZE44 = 0;}}else{$ZZZD33 = 0;$ZZZE44 = 0;} $ZZS1818 = $this->db->ZZH77("SELECT COALESCE(MAX(sequence) + 1, 0) AS sequence FROM {$this->db->dbPrefix}advancedreports WHERE category_id = ? ", array($ZZZP1515));$ZZZS1818 = $this->db->ZZI88($ZZS1818, 'sequence');$ZZq16 = "INSERT INTO {$this->db->dbPrefix}advancedreports (module, category_id, sequence, related_data, fields, filters, grouping, aggregates, totalAggregates, title, description, options, labels, chart, shared, sharedlevel, owner, iscombined, combinedfields, calcFields, columnstate) VALUES (?, ?, ?, ".ZZZZZZZa0::ZZZZZZZm12($ZZZQ1616).", ".ZZZZZZZa0::ZZZZZZZm12($ZZZc2).", ".ZZZZZZZa0::ZZZZZZZm12($filters).", ".ZZZZZZZa0::ZZZZZZZm12($ZZZG66).", ".ZZZZZZZa0::ZZZZZZZm12($ZZZH77).", ".ZZZZZZZa0::ZZZZZZZm12($ZZZI88).", ?, ?, ".ZZZZZZZa0::ZZZZZZZm12($ZZZJ99).", ".ZZZZZZZa0::ZZZZZZZm12($ZZZK1010).", ".ZZZZZZZa0::ZZZZZZZm12($ZZZL1111).", ?, ?, ?, ?, ".ZZZZZZZa0::ZZZZZZZm12($ZZZR1717).", ".ZZZZZZZa0::ZZZZZZZm12($ZZZM1212).", ".ZZZZZZZa0::ZZZZZZZm12($ZZZZZZY2424).")";$ZZZx23 = array($module, $ZZZP1515, $ZZZS1818, $title, $description, $ZZZD33, $ZZZE44, $ZZZF55, $isCombined,);$this->db->setDieOnError(true);$this->db->ZZH77($ZZq16, $ZZZx23);$ZZS1818 = $this->db->run_query_allrecords("SELECT ".ZZZZZZZa0::ZZZZZZZn13()." AS id");return $ZZS1818[0]['id'];} function ZZZZZZZo14($ZZZZZZZp15 = array(), $id = 0) {$id = (int)$id;if($id <= 0){return;} $ZZq16 = "";foreach ($ZZZZZZZp15 as $Zu20 => $value) {switch ($Zu20){case 'related_data': case 'options': $ZZq16 .= $Zu20." = ".ZZZZZZZa0::ZZZZZZZm12($value).",";break;default: $ZZq16 .= $Zu20." = '".$value."',";break;}} $ZZq16 = rtrim($ZZq16, ",");$ZZq16 = "UPDATE {$this->db->dbPrefix}advancedreports SET {$ZZq16} WHERE id = {$id}";return $this->db->ZZH77($ZZq16, array());} function ZZZZJ99($ZZZZK1010){$ZZq16 = "SELECT MAX(sequence) FROM {$this->db->dbPrefix}advancedreports WHERE category_id = {$ZZZZK1010['selectedCategory']}";$ZZZS1818 = $this->db->ZZZu20($ZZq16);$ZZZS1818 = $ZZZS1818[0][0];if(empty($ZZZS1818)){$ZZZS1818 = 1;}else{$ZZZS1818++;} $ZZZF55 = $ZZZZK1010['owner'];$ZZZZZZZq16 = "";if($ZZZZK1010['customOptions']['enableAudit'] == 'true')$ZZZZZZZq16.=',"enableAudit":true';if($ZZZZK1010['customOptions']['enableCustomTables'] == 'true')$ZZZZZZZq16.=',"enableCustomTables":true';if($ZZZZK1010['selectedReportType'] == 1)$ZZZZZZZq16.=',"isCombined":true';$ZZZJ99 = "{\"includeDetails\":true,\"isCrosstab\":false,\"aggregateColumn\":false{$ZZZZZZZq16}}";$ZZq16 = "INSERT INTO {$this->db->dbPrefix}advancedreports(category_id, sequence, module, related_data, fields, filters, grouping, aggregates, totalAggregates, title, description, options, labels, chart, owner, shared, sharedlevel, iscombined, combinedfields) VALUES ({$ZZZZK1010['selectedCategory']}, {$ZZZS1818}, '{$ZZZZK1010['mainModuleName']}', ".ZZZZZZZa0::ZZZZZZZm12($ZZZZK1010['selectedModules']).", ".ZZZZZZZa0::ZZZZZZZm12('[]').", ".ZZZZZZZa0::ZZZZZZZm12('[]').", ".ZZZZZZZa0::ZZZZZZZm12('[]').", ".ZZZZZZZa0::ZZZZZZZm12('[]').", ".ZZZZZZZa0::ZZZZZZZm12('{}').", '{$ZZZZK1010['reportTitle']}', '{$ZZZZK1010['reportDescription']}', ".ZZZZZZZa0::ZZZZZZZm12($ZZZJ99).", ".ZZZZZZZa0::ZZZZZZZm12('{}').", ".ZZZZZZZa0::ZZZZZZZm12('{"chartTitle":"","chartType":"pie","chartLabels":"","chartAxisX":"","chartAxisY":"","chartAxisY2":"","chartYAxisType":"","chartYAxis2Type":"","chartLegend":"","chartStacked":false}').", '{$ZZZF55}', 0, 0, {$ZZZZK1010['selectedReportType']}, ".ZZZZZZZa0::ZZZZZZZm12('{"sortAction":"group","dateGrouping":"day","sortDirection":"ASC","position":"column","fields":{}}').");";$this->db->ZZZv21($ZZq16);$ZY2424 = $this->db->ZZZv21("SELECT ".ZZZZZZZa0::ZZZZZZZn13()." AS id");$ZZr17 = $this->db->fetchRow($ZY2424);return $ZZr17['id'];} function ZZZZd3($id,$title,$description){$this->db->ZZH77("UPDATE {$this->db->dbPrefix}advancedreports SET title=?, description=? WHERE id = ?", array($title, $description, $id));} function deleteReport($id){$this->db->ZZH77("DELETE FROM {$this->db->dbPrefix}advancedreports WHERE id = ?", array($id));} function ZZZU2020($ZZZV2121="*", $ZZZW2222="", $limit=1){$query = "SELECT $ZZZV2121 FROM {$this->db->dbPrefix}advancedreports";if(!empty($ZZZW2222)){$query .= " WHERE $ZZZW2222";} if((int)$limit>0){$query.= " ORDER BY id ";$query.= ZZZZZZZa0::ZZZZZZZr17(0, $limit);} $query.=";";$report = $this->db->run_query_allrecords($query);foreach($report as &$ZZZZZZZs18) {$ZZZZZZZs18 = PlatformConnector::ZZZZZZs18($ZZZZZZZs18);} return $report;} function loadReport($id){$ZZS1818 = null;$ZZS1818 = $this->db->run_query_allrecords("SELECT * FROM {$this->db->dbPrefix}advancedreports WHERE id = ". (int)$id);if($ZZS1818){$ZZS1818 = $ZZS1818[0];$ZZS1818["related_data"] = json_decode($ZZS1818["related_data"],true);for($Zf5 = 0;$Zf5<count($ZZS1818['related_data']);$Zf5++){for($ZZZT1919 = 0;$ZZZT1919 <= 11;$ZZZT1919++) {if(!isset($ZZS1818["related_data"][$Zf5][$ZZZT1919])) {$ZZS1818["related_data"][$Zf5][$ZZZT1919] = false;}}}} $ZZS1818 = PlatformConnector::ZZZZZZs18($ZZS1818);return $ZZS1818;}}
;interface ZZZZZZZt19 {function ZZZZZZZu20();}
;class ZZZZZZZv21 {static protected $ZZZZZZZw22 = array("UNSIGNED" => "INT", "BLOB" => "varbinary(max)", "VARCHAR" => "NVARCHAR",);static function getType($type) {return self::$ZZZZZZZw22[$type];}} class ZZZZZZZx23 {static function ZZZZZZZn13() {return "SCOPE_IDENTITY()";} static function quote($ZZJ99) {return "[{$ZZJ99}]";} function ZZZZZZZy24($ZZZm12) {return "SET IDENTITY_INSERT {$ZZZm12} ON";} function ZZZZZZZz25($ZZZm12) {return "SET IDENTITY_INSERT {$ZZZm12} OFF";}} class ZZZZZZZA00 implements ZZZZZZZt19 {protected $r17;function __construct($value) {$this->r17 = $value;} function ZZZZZZZu20() {return $this->r17;}} class ZZZZZZZB11 implements ZZZZZZZt19 {protected $ZZZV2121;function __construct(array $ZZZV2121) {$this->ZZZV2121 = $ZZZV2121;} function ZZZZZZZu20() {return " " . implode(" + ", $this->ZZZV2121) . " ";}} class ZZZZZZZC22 implements ZZZZZZZt19 {protected $ZZZZZZZD33;protected $ZZZZZZZE44;protected $ZZZZZZZF55;function __construct($ZZZZZZZD33, $ZZZZZZZE44, $ZZZZZZZF55) {$this->ZZZZZZZD33 = $ZZZZZZZD33;$this->ZZZZZZZE44 = $ZZZZZZZE44;$this->ZZZZZZZF55 = $ZZZZZZZF55;} function ZZZZZZZG66($value) {$value = str_replace("'", "", $value);$ZZZZZZZH77 = ZZZZZZZv21::getType("VARCHAR");if(is_numeric($value)) {$ZZZZZZZH77 = ZZZZZZZv21::getType("UNSIGNED");} return $ZZZZZZZH77;} function ZZZZZZZu20() {$ZZZZZZZI88 = new ZZZZZZZJ99($this->ZZZZZZZE44, $this->ZZZZZZZG66($this->ZZZZZZZE44));$ZZZZZZZE44 = $ZZZZZZZI88->ZZZZZZZu20();$ZZZZZZZI88 = new ZZZZZZZJ99($this->ZZZZZZZF55, $this->ZZZZZZZG66($this->ZZZZZZZF55));$ZZZZZZZF55 = $ZZZZZZZI88->ZZZZZZZu20();return "IIF({$this->ZZZZZZZD33}, {$ZZZZZZZE44}, {$ZZZZZZZF55})";}} class ZZZZZZZK1010 implements ZZZZZZZt19 {protected $ZZZZZZZL1111;protected $ZZZZZn13 = array();protected $ZZZZZZZM1212;function __construct($ZZZZZZZL1111, array $ZZZZZn13) {$this->ZZZZZZZL1111 = $ZZZZZZZL1111;$this->ZZZZZn13 = $ZZZZZn13;} function ZZZZZZZu20() {$ZZZZZZZN1313 = 0;$ZZZZZZZO1414 = array_keys($this->ZZZZZn13);$ZY2424 = "";$ZY2424 .= " CASE {$this->ZZZZZZZL1111} ";foreach ($ZZZZZZZO1414 as $ZZZZZZZP1515) {$ZY2424 .= " WHEN '{$ZZZZZZZP1515}' THEN {$ZZZZZZZN1313} ";$ZZZZZZZN1313++;} $ZY2424 .= " ELSE {$ZZZZZZZN1313} END ";return $ZY2424;}} class ZZZZZZZQ1616 implements ZZZZZZZt19 {protected $ZZZZZZZL1111;function __construct($ZZZZZZZL1111) {$this->ZZZZZZZL1111 = $ZZZZZZZL1111;} function ZZZZZZZu20() {return " LEN($this->ZZZZZZZL1111) ";}} class ZZZZZZZR1717 implements ZZZZZZZt19 {protected $ZZZZZZZL1111;protected $ZO1414;protected $Zl11;function __construct($ZZZZZZZL1111, $ZO1414, $Zl11) {$this->ZZZZZZZL1111 = $ZZZZZZZL1111;$this->ZO1414 = $ZO1414;$this->Zl11 = $Zl11;} function ZZZZZZZu20() {return " SUBSTRING({$this->ZZZZZZZL1111}, {$this->ZO1414}, {$this->Zl11}) ";}} class ZZZZZZZS1818 implements ZZZZZZZt19 {protected $ZZZZZZZT1919;protected $ZZn13;function __construct($ZZZZZZZT1919, $ZZn13) {$this->ZZZZZZZT1919 = $ZZZZZZZT1919;$this->count = $ZZn13;} function ZZZZZZZu20() {return " OFFSET {$this->ZZZZZZZT1919} ROWS FETCH NEXT {$this->count} ROWS ONLY ";}} class ZZZZZZZU2020 {static function getInstance($ZZZZZZZV2121, $ZZZZZZZW2222) {switch($ZZZZZZZV2121) {case 'DATE': return new ZZZZZZZX2323($ZZZZZZZW2222);break;case 'WEEK': return new ZZZZZZZY2424($ZZZZZZZW2222);break;case 'YEAR': return new ZZZZZZZZ2525($ZZZZZZZW2222);break;case 'MONTH': return new ZZZZZZZZa0($ZZZZZZZW2222);break;case 'QUARTER': return new ZZZZZZZZb1($ZZZZZZZW2222);break;case 'HOUR': return new ZZZZZZZZc2($ZZZZZZZW2222);break;case 'MINUTE': return new ZZZZZZZZd3($ZZZZZZZW2222);break;case 'SECOND': return new ZZZZZZZZe4($ZZZZZZZW2222);break;case 'MICROSECOND': return new ZZZZZZZZf5($ZZZZZZZW2222);break;}}} class ZZZZZZZX2323 implements ZZZZZZZt19 {protected $ZZZZZZZL1111;function __construct($ZZZZZZZL1111) {$this->ZZZZZZZL1111 = $ZZZZZZZL1111;} function ZZZZZZZu20() {return " FORMAT({$this->ZZZZZZZL1111}, 'yyyy-MM-dd') ";}} class ZZZZZZZZg6 implements ZZZZZZZt19 {protected $ZZZZZZZL1111;protected $value;protected $type;function __construct($ZZZZZZZL1111, $value, $type) {$this->ZZZZZZZL1111 = $ZZZZZZZL1111;$this->value = $value;$this->type = $type;} function ZZZZZZZu20() {return " DATEADD({$this->type}, {$this->value}, {$this->ZZZZZZZL1111}) ";}} class ZZZZZZZZh7 implements ZZZZZZZt19 {function ZZZZZZZu20() {return "GETDATE()";}} class ZZZZZZZY2424 implements ZZZZZZZt19 {protected $ZZZZZZZL1111;function __construct($ZZZZZZZL1111) {$this->ZZZZZZZL1111 = $ZZZZZZZL1111;} function ZZZZZZZu20() {return " CAST(DATEPART(wk, {$this->ZZZZZZZL1111}) AS nvarchar) ";}} class ZZZZZZZZ2525 implements ZZZZZZZt19 {protected $ZZZZZZZL1111;function __construct($ZZZZZZZL1111) {$this->ZZZZZZZL1111 = $ZZZZZZZL1111;} function ZZZZZZZu20() {return " CAST(DATEPART(yy, {$this->ZZZZZZZL1111}) AS nvarchar) ";}} class ZZZZZZZZa0 implements ZZZZZZZt19 {protected $ZZZZZZZL1111;function __construct($ZZZZZZZL1111) {$this->ZZZZZZZL1111 = $ZZZZZZZL1111;} function ZZZZZZZu20() {return " CAST(DATEPART(mm, {$this->ZZZZZZZL1111}) AS nvarchar) ";}} class ZZZZZZZZb1 implements ZZZZZZZt19 {protected $ZZZZZZZL1111;function __construct($ZZZZZZZL1111) {$this->ZZZZZZZL1111 = $ZZZZZZZL1111;} function ZZZZZZZu20() {return " CAST(DATEPART(qq, {$this->ZZZZZZZL1111}) AS nvarchar) ";}} class ZZZZZZZZc2 implements ZZZZZZZt19 {protected $ZZZZZZZL1111;function __construct($ZZZZZZZL1111) {$this->ZZZZZZZL1111 = $ZZZZZZZL1111;} function ZZZZZZZu20() {return " DATEPART(hh, {$this->ZZZZZZZL1111}) ";}} class ZZZZZZZZd3 implements ZZZZZZZt19 {protected $ZZZZZZZL1111;function __construct($ZZZZZZZL1111) {$this->ZZZZZZZL1111 = $ZZZZZZZL1111;} function ZZZZZZZu20() {return " DATEPART(mi, {$this->ZZZZZZZL1111}) ";}} class ZZZZZZZZe4 implements ZZZZZZZt19 {protected $ZZZZZZZL1111;function __construct($ZZZZZZZL1111) {$this->ZZZZZZZL1111 = $ZZZZZZZL1111;} function ZZZZZZZu20() {return " DATEPART(ss, {$this->ZZZZZZZL1111}) ";}} class ZZZZZZZZf5 implements ZZZZZZZt19 {protected $ZZZZZZZL1111;function __construct($ZZZZZZZL1111) {$this->ZZZZZZZL1111 = $ZZZZZZZL1111;} function ZZZZZZZu20() {return " DATEPART(mcs, {$this->ZZZZZZZL1111}) ";}} class ZZZZZZZZi8 implements ZZZZZZZt19 {protected $Zu20;protected $value;function __construct($Zu20, $value = null) {$this->key = $Zu20;$this->value = $value;} function ZZZZZZZu20() {if($this->key == 'names') {return '';} if($this->key == 'default_week_format') {return '';}}} class ZZZZZZZZj9 implements ZZZZZZZt19 {protected $ZZZZZZZL1111;protected $ZZZZZZZZk10;protected $ZZZZZZZZl11;function __construct($ZZZZZZZL1111, $ZZZZZZZZk10, $ZZZZZZZZl11) {$this->ZZZZZZZL1111 = $ZZZZZZZL1111;$this->ZZZZZZZZk10 = $ZZZZZZZZk10;$this->ZZZZZZZZl11 = $ZZZZZZZZl11;} function ZZZZZZZu20() {$ZZZZZZZT1919 = new ZZZZZZZJ99($this->ZZZZZZZL1111, "DATETIMEOFFSET");$ZZZZZZZL1111 = "SWITCHOFFSET({$ZZZZZZZT1919->ZZZZZZZu20()}, '{$this->ZZZZZZZZl11}')";$ZZZZZZZI88 = new ZZZZZZZJ99($ZZZZZZZL1111, "DATETIME");return $ZZZZZZZI88->ZZZZZZZu20();}} class ZZZZZZZJ99 implements ZZZZZZZt19 {protected $r17;protected $type;protected $ZZZZZZZZm12;function __construct($r17, $type, $ZZZZZZZZm12 = null) {$this->r17 = $r17;$this->type = $type;$this->ZZZZZZZZm12 = $ZZZZZZZZm12;} function ZZZZZZZu20() {$ZY2424 = "";$ZY2424 .= " CONVERT({$this->type}, {$this->r17}";if($this->ZZZZZZZZm12) {$ZY2424 .= ", {$this->ZZZZZZZZm12}";} $ZY2424 .= ") ";return $ZY2424;}} class ZZZZZZZZn13 implements ZZZZZZZt19 {function __construct() {} function ZZZZZZZu20() {return "CAST(GETDATE() AS DATE)";}} class ZZZZZZZZo14 implements ZZZZZZZt19 {protected $name;function __construct($name) {$this->name = $name;} function ZZZZZZZu20() {return "#{$this->name}";}} class ZZZZZZZZp15 implements ZZZZZZZt19 {protected $name;protected $query;function __construct($name, $query) {$this->name = $name;$this->query = $query;} function ZZZZZZZu20() {$ZZZZZZZZq16 = new ZZZZZZZZr17($this->name);$ZZZZZZZZs18 = $ZZZZZZZZq16->ZZZZZZZu20();$ZZZZZZZZt19 = " SELECT * INTO {$this->name} FROM ({$this->query}) AS combinedTemporaryTable";return implode(";\n\r ", array($ZZZZZZZZs18, $ZZZZZZZZt19));}} class ZZZZZZZZr17 implements ZZZZZZZt19 {protected $name;function __construct($name) {$this->name = $name;} function ZZZZZZZu20() {return "IF OBJECT_ID('tempdb..{$this->name}') IS NOT NULL DROP TABLE {$this->name}";}} class ZZZZZZZZu20 implements ZZZZZZZt19 {protected $ZZZZZZZZv21;function __construct($ZZZZZZZZv21) {$this->ZZZZZZZZv21 = $ZZZZZZZZv21;} function ZZZZZZZu20() {return "{$this->ZZZZZZZZv21}";}} class ZZZZZZZZw22 implements ZZZZZZZt19 {protected $ZZZZZZZZx23;protected $type;protected $ZZZZZZZZy24;protected $ZZZZZZZZz25;function __construct($ZZZZZZZZx23="+", $type="day", $ZZZZZZZZz25, $ZZZZZZZZy24) {$this->ZZZZZZZZx23 = $ZZZZZZZZx23;$this->type = $type;$this->ZZZZZZZZz25 = $ZZZZZZZZz25;$this->ZZZZZZZZy24 = $ZZZZZZZZy24;} function ZZZZZZZu20() {return "DATEADD({$this->type}, {$this->ZZZZZZZZx23}{$this->ZZZZZZZZz25}, $this->ZZZZZZZZy24)";}} class ZZZZZZZZA00 implements ZZZZZZZt19 {protected $ZZZZZZZZB11;function __construct($ZZZZZZZZB11) {$this->ZZZZZZZZB11 = $ZZZZZZZZB11;} function ZZZZZZZu20() {return " COLLATE {$this->ZZZZZZZZB11} ";}}
;class ZZZZZZZZC22 {static protected $ZZZZZZZw22 = array("UNSIGNED" => "UNSIGNED", "BLOB" => "BLOB", "VARCHAR" => "VARCHAR",);static function getType($type) {return self::$ZZZZZZZw22[$type];}} class ZZZZZZZZD33 {static function ZZZZZZZn13() {return "last_insert_id()";} static function quote($ZZJ99) {return "`{$ZZJ99}`";} function ZZZZZZZy24($ZZZm12) {return "";} function ZZZZZZZz25($ZZZm12) {return "";}} class ZZZZZZZZE44 implements ZZZZZZZt19 {protected $r17;function __construct($value) {$this->r17 = $value;} function ZZZZZZZu20() {return $this->r17;}} class ZZZZZZZZF55 implements ZZZZZZZt19 {protected $ZZZV2121;function __construct(array $ZZZV2121) {$this->ZZZV2121 = $ZZZV2121;} function ZZZZZZZu20() {return " CONCAT(".implode(",", $this->ZZZV2121).") ";}} class ZZZZZZZZG66 implements ZZZZZZZt19 {protected $ZZZZZZZD33;protected $ZZZZZZZE44;protected $ZZZZZZZF55;function __construct($ZZZZZZZD33, $ZZZZZZZE44, $ZZZZZZZF55) {$this->ZZZZZZZD33 = $ZZZZZZZD33;$this->ZZZZZZZE44 = $ZZZZZZZE44;$this->ZZZZZZZF55 = $ZZZZZZZF55;} function ZZZZZZZu20() {return "IF({$this->ZZZZZZZD33}, {$this->ZZZZZZZE44}, {$this->ZZZZZZZF55})";}} class ZZZZZZZZH77 implements ZZZZZZZt19 {protected $ZZZZZZZL1111;protected $ZZZZZn13 = array();protected $ZZZZZZZM1212;function __construct($ZZZZZZZL1111, array $ZZZZZn13) {$this->ZZZZZZZL1111 = $ZZZZZZZL1111;$this->ZZZZZn13 = $ZZZZZn13;} function ZZZZZZZu20() {$ZZZZZZZO1414 = array_keys($this->ZZZZZn13);foreach ($ZZZZZZZO1414 as &$ZZZZZZZP1515) {$ZZZZZZZP1515 = "'{$ZZZZZZZP1515}'";} $ZZZZZZZO1414 = implode(",", $ZZZZZZZO1414);return " FIELD({$this->ZZZZZZZL1111}, {$ZZZZZZZO1414}) ";}} class ZZZZZZZZI88 implements ZZZZZZZt19 {protected $ZZZZZZZL1111;function __construct($ZZZZZZZL1111) {$this->ZZZZZZZL1111 = $ZZZZZZZL1111;} function ZZZZZZZu20() {return " LENGTH($this->ZZZZZZZL1111) ";}} class ZZZZZZZZJ99 implements ZZZZZZZt19 {protected $ZZZZZZZL1111;protected $ZO1414;protected $Zl11;function __construct($ZZZZZZZL1111, $ZO1414, $Zl11) {$this->ZZZZZZZL1111 = $ZZZZZZZL1111;$this->ZO1414 = $ZO1414;$this->Zl11 = $Zl11;} function ZZZZZZZu20() {return " MID({$this->ZZZZZZZL1111}, {$this->ZO1414}, {$this->Zl11}) ";}} class ZZZZZZZZK1010 implements ZZZZZZZt19 {protected $ZZZZZZZT1919;protected $ZZn13;function __construct($ZZZZZZZT1919, $ZZn13) {$this->ZZZZZZZT1919 = $ZZZZZZZT1919;$this->count = $ZZn13;} function ZZZZZZZu20() {return " LIMIT {$this->ZZZZZZZT1919}, {$this->count} ";}} class ZZZZZZZZL1111 {static function getInstance($ZZZZZZZV2121, $ZZZZZZZW2222) {switch($ZZZZZZZV2121) {case 'DATE': return new ZZZZZZZZM1212($ZZZZZZZW2222);break;case 'WEEK': return new ZZZZZZZZN1313($ZZZZZZZW2222);break;case 'YEAR': return new ZZZZZZZZO1414($ZZZZZZZW2222);break;case 'MONTH': return new ZZZZZZZZP1515($ZZZZZZZW2222);break;case 'QUARTER': return new ZZZZZZZZQ1616($ZZZZZZZW2222);break;case 'HOUR': return new ZZZZZZZZR1717($ZZZZZZZW2222);break;case 'MINUTE': return new ZZZZZZZZS1818($ZZZZZZZW2222);break;case 'SECOND': return new ZZZZZZZZT1919($ZZZZZZZW2222);break;case 'MICROSECOND': return new ZZZZZZZZU2020($ZZZZZZZW2222);break;}}} class ZZZZZZZZM1212 implements ZZZZZZZt19 {protected $ZZZZZZZL1111;function __construct($ZZZZZZZL1111) {$this->ZZZZZZZL1111 = $ZZZZZZZL1111;} function ZZZZZZZu20() {return " DATE({$this->ZZZZZZZL1111}) ";}} class ZZZZZZZZV2121 implements ZZZZZZZt19 {protected $ZZZZZZZL1111;protected $value;protected $type;function __construct($ZZZZZZZL1111, $value, $type) {$this->ZZZZZZZL1111 = $ZZZZZZZL1111;$this->value = $value;$this->type = $type;} function ZZZZZZZu20() {if($this->value < 0) {$this->value = abs($this->value);return " DATE_SUB({$this->ZZZZZZZL1111}, INTERVAL {$this->value} {$this->type}) ";} else {return " DATE_ADD({$this->ZZZZZZZL1111}, INTERVAL {$this->value} {$this->type}) ";}}} class ZZZZZZZZW2222 implements ZZZZZZZt19 {function ZZZZZZZu20() {return "NOW()";}} class ZZZZZZZZN1313 implements ZZZZZZZt19 {protected $ZZZZZZZL1111;function __construct($ZZZZZZZL1111) {$this->ZZZZZZZL1111 = $ZZZZZZZL1111;} function ZZZZZZZu20() {return " WEEK({$this->ZZZZZZZL1111}) ";}} class ZZZZZZZZO1414 implements ZZZZZZZt19 {protected $ZZZZZZZL1111;function __construct($ZZZZZZZL1111) {$this->ZZZZZZZL1111 = $ZZZZZZZL1111;} function ZZZZZZZu20() {return " YEAR({$this->ZZZZZZZL1111}) ";}} class ZZZZZZZZP1515 implements ZZZZZZZt19 {protected $ZZZZZZZL1111;function __construct($ZZZZZZZL1111) {$this->ZZZZZZZL1111 = $ZZZZZZZL1111;} function ZZZZZZZu20() {return " MONTH({$this->ZZZZZZZL1111}) ";}} class ZZZZZZZZQ1616 implements ZZZZZZZt19 {protected $ZZZZZZZL1111;function __construct($ZZZZZZZL1111) {$this->ZZZZZZZL1111 = $ZZZZZZZL1111;} function ZZZZZZZu20() {return " QUARTER({$this->ZZZZZZZL1111}) ";}} class ZZZZZZZZR1717 implements ZZZZZZZt19 {protected $ZZZZZZZL1111;function __construct($ZZZZZZZL1111) {$this->ZZZZZZZL1111 = $ZZZZZZZL1111;} function ZZZZZZZu20() {return " HOUR({$this->ZZZZZZZL1111}) ";}} class ZZZZZZZZS1818 implements ZZZZZZZt19 {protected $ZZZZZZZL1111;function __construct($ZZZZZZZL1111) {$this->ZZZZZZZL1111 = $ZZZZZZZL1111;} function ZZZZZZZu20() {return " MINUTE({$this->ZZZZZZZL1111}) ";}} class ZZZZZZZZT1919 implements ZZZZZZZt19 {protected $ZZZZZZZL1111;function __construct($ZZZZZZZL1111) {$this->ZZZZZZZL1111 = $ZZZZZZZL1111;} function ZZZZZZZu20() {return " SECOND({$this->ZZZZZZZL1111}) ";}} class ZZZZZZZZU2020 implements ZZZZZZZt19 {protected $ZZZZZZZL1111;function __construct($ZZZZZZZL1111) {$this->ZZZZZZZL1111 = $ZZZZZZZL1111;} function ZZZZZZZu20() {return " MICROSECOND({$this->ZZZZZZZL1111}) ";}} class ZZZZZZZZX2323 implements ZZZZZZZt19 {protected $Zu20;protected $value;function __construct($Zu20, $value = null) {$this->key = $Zu20;$this->value = $value;} function ZZZZZZZu20() {if($this->key == 'names') {return "SET {$this->key} {$this->value};";} else {return "SET {$this->key} = {$this->value};";}}} class ZZZZZZZZY2424 implements ZZZZZZZt19 {protected $ZZZZZZZL1111;protected $ZZZZZZZZk10;protected $ZZZZZZZZl11;function __construct($ZZZZZZZL1111, $ZZZZZZZZk10, $ZZZZZZZZl11) {$this->ZZZZZZZL1111 = $ZZZZZZZL1111;$this->ZZZZZZZZk10 = $ZZZZZZZZk10;$this->ZZZZZZZZl11 = $ZZZZZZZZl11;} function ZZZZZZZu20() {return "CONVERT_TZ({$this->ZZZZZZZL1111}, \"{$this->ZZZZZZZZk10}\", \"{$this->ZZZZZZZZl11}\")";}} class ZZZZZZZZZ2525 implements ZZZZZZZt19 {protected $r17;function __construct($r17, $type = false) {$this->r17 = $r17;} function ZZZZZZZu20() {return "{$this->r17}";}} class ZZZZZZZZZa0 implements ZZZZZZZt19 {protected $name;function __construct($name) {$this->name = $name;} function ZZZZZZZu20() {return "{$this->name}";}} class ZZZZZZZZZb1 implements ZZZZZZZt19 {protected $name;protected $query;function __construct($name, $query) {$this->name = $name;$this->query = $query;} function ZZZZZZZu20() {return "CREATE TEMPORARY TABLE IF NOT EXISTS {$this->name} AS {$this->query}";}} class ZZZZZZZZZc2 implements ZZZZZZZt19 {protected $name;function __construct($name) {$this->name = $name;} function ZZZZZZZu20() {return "DROP TEMPORARY TABLE IF EXISTS {$this->name}";}} class ZZZZZZZZZd3 implements ZZZZZZZt19 {protected $ZZZZZZZZv21;function __construct($ZZZZZZZZv21) {$this->ZZZZZZZZv21 = $ZZZZZZZZv21;} function ZZZZZZZu20() {return "{$this->ZZZZZZZZv21}";}} class ZZZZZZZZZe4 implements ZZZZZZZt19 {function __construct() {} function ZZZZZZZu20() {return "CURDATE()";}} class ZZZZZZZZZf5 implements ZZZZZZZt19 {protected $ZZZZZZZZx23;protected $type;protected $ZZZZZZZZy24;protected $ZZZZZZZZz25;function __construct($ZZZZZZZZx23="+", $type="day", $ZZZZZZZZz25, $ZZZZZZZZy24) {$this->ZZZZZZZZx23 = $ZZZZZZZZx23;$this->type = $type;$this->ZZZZZZZZz25 = $ZZZZZZZZz25;$this->ZZZZZZZZy24 = $ZZZZZZZZy24;} function ZZZZZZZu20() {return "$this->ZZZZZZZZy24 {$this->ZZZZZZZZx23} INTERVAL {$this->ZZZZZZZZz25} {$this->type}";}} class ZZZZZZZZZg6 implements ZZZZZZZt19 {protected $ZZZZZZZZB11;function __construct($ZZZZZZZZB11) {$this->ZZZZZZZZB11 = $ZZZZZZZZB11;} function ZZZZZZZu20() {return " COLLATE {$this->ZZZZZZZZB11} ";}}
;class ZZZZZZZa0 {static function ZZZZZZZG66($type) {if(PlatformConnector::ZZZZZZw22() == "mysql") {return ZZZZZZZZC22::getType($type);} else {return ZZZZZZZv21::getType($type);}} static function ZZZZZZZm12($r17) {return '0x'.strtoupper(bin2hex($r17));} static function ZZZZZZZn13() {if(PlatformConnector::ZZZZZZw22() == "mysql") {return ZZZZZZZZD33::ZZZZZZZn13();} else {return ZZZZZZZx23::ZZZZZZZn13();}} static function quote($ZZJ99) {if(PlatformConnector::ZZZZZZw22() == "mysql") {return ZZZZZZZZD33::quote($ZZJ99);} else {return ZZZZZZZx23::quote($ZZJ99);}} static function ZZZZZZZy24($ZZZm12) {if(PlatformConnector::ZZZZZZw22() == "mysql") {return ZZZZZZZZD33::ZZZZZZZy24($ZZZm12);} else {return ZZZZZZZx23::ZZZZZZZy24($ZZZm12);}} static function ZZZZZZZz25($ZZZm12) {if(PlatformConnector::ZZZZZZw22() == "mysql") {return ZZZZZZZZD33::ZZZZZZZz25($ZZZm12);} else {return ZZZZZZZx23::ZZZZZZZz25($ZZZm12);}} static function ZZZZZZZZZh7(array $ZZZV2121) {if(PlatformConnector::ZZZZZZw22() == "mysql") {$ZZZZZZt19 = new ZZZZZZZZF55($ZZZV2121);} else {$ZZZZZZt19 = new ZZZZZZZB11($ZZZV2121);} return $ZZZZZZt19->ZZZZZZZu20();} static function ZZZZZZZb1($ZZZZZZZD33, $ZZZZZZZE44, $ZZZZZZZF55) {if(PlatformConnector::ZZZZZZw22() == "mysql") {$ZZZZZZt19 = new ZZZZZZZZG66($ZZZZZZZD33, $ZZZZZZZE44, $ZZZZZZZF55);} else {$ZZZZZZt19 = new ZZZZZZZC22($ZZZZZZZD33, $ZZZZZZZE44, $ZZZZZZZF55);} return $ZZZZZZt19->ZZZZZZZu20();} static function ZZZZZZZZZi8($ZZZZZZZL1111, array $ZZZZZn13) {if(PlatformConnector::ZZZZZZw22() == "mysql") {$ZZZZZZt19 = new ZZZZZZZZH77($ZZZZZZZL1111, $ZZZZZn13);} else {$ZZZZZZt19 = new ZZZZZZZK1010($ZZZZZZZL1111, $ZZZZZn13);} return $ZZZZZZt19->ZZZZZZZu20();} static function ZZZZZZZZZj9($ZZZZZZZL1111) {if(PlatformConnector::ZZZZZZw22() == "mysql") {$ZZZZZZt19 = new ZZZZZZZZI88($ZZZZZZZL1111);} else {$ZZZZZZt19 = new ZZZZZZZQ1616($ZZZZZZZL1111);} return $ZZZZZZt19->ZZZZZZZu20();} static function ZZZZZZZZZk10($ZZZZZZZL1111, $ZO1414, $Zl11) {if(PlatformConnector::ZZZZZZw22() == "mysql") {$ZZZZZZt19 = new ZZZZZZZZJ99($ZZZZZZZL1111, $ZO1414, $Zl11);} else {$ZZZZZZt19 = new ZZZZZZZR1717($ZZZZZZZL1111, $ZO1414, $Zl11);} return $ZZZZZZt19->ZZZZZZZu20();} static function ZZZZZZZr17($ZZZZZZZT1919, $ZZn13) {if(PlatformConnector::ZZZZZZw22() == "mysql") {$ZZZZZZt19 = new ZZZZZZZZK1010($ZZZZZZZT1919, $ZZn13);} else {$ZZZZZZt19 = new ZZZZZZZS1818($ZZZZZZZT1919, $ZZn13);} return $ZZZZZZt19->ZZZZZZZu20();} static function ZZZZZZZZZl11($ZZZZZZZV2121, $ZZZZZZZW2222) {if(PlatformConnector::ZZZZZZw22() == "mysql") {$ZZZZZZt19 = ZZZZZZZZL1111::getInstance($ZZZZZZZV2121, $ZZZZZZZW2222);} else {$ZZZZZZt19 = ZZZZZZZU2020::getInstance($ZZZZZZZV2121, $ZZZZZZZW2222);} return $ZZZZZZt19->ZZZZZZZu20();} static function getDate($ZZZZZZZL1111) {if(PlatformConnector::ZZZZZZw22() == "mysql") {$ZZZZZZt19 = new ZZZZZZZZM1212($ZZZZZZZL1111);} else {$ZZZZZZt19 = new ZZZZZZZX2323($ZZZZZZZL1111);} return $ZZZZZZt19->ZZZZZZZu20();} static function ZZZZZZZZZm12($ZZZZZZZL1111, $value, $type) {if(PlatformConnector::ZZZZZZw22() == "mysql") {$ZZZZZZt19 = new ZZZZZZZZV2121($ZZZZZZZL1111, $value, $type);} else {$ZZZZZZt19 = new ZZZZZZZZg6($ZZZZZZZL1111, $value, $type);} return $ZZZZZZt19->ZZZZZZZu20();} static function ZZZZZZZZZn13() {if(PlatformConnector::ZZZZZZw22() == "mysql") {$ZZZZZZt19 = new ZZZZZZZZW2222();} else {$ZZZZZZt19 = new ZZZZZZZZh7();} return $ZZZZZZt19->ZZZZZZZu20();} static function ZZZZZZZZZo14($ZZZZZZZL1111) {return self::ZZZZZZZZZl11("WEEK", $ZZZZZZZL1111);} static function ZZZZZZZZZp15($ZZZZZZZL1111) {return self::ZZZZZZZZZl11("YEAR", $ZZZZZZZL1111);} static function ZZZZZZZZZq16($ZZZZZZZL1111) {return self::ZZZZZZZZZl11("MONTH", $ZZZZZZZL1111);} static function ZZZZZZZZZr17($ZZZZZZZL1111) {return self::ZZZZZZZZZl11("QUARTER", $ZZZZZZZL1111);} static function ZZZZZZZZZs18($ZZZZZZZL1111) {return self::ZZZZZZZZZl11("HOUR", $ZZZZZZZL1111);} static function ZZZZZZZZZt19($ZZZZZZZL1111) {return self::ZZZZZZZZZl11("MINUTE", $ZZZZZZZL1111);} static function ZZZZZZZZZu20($ZZZZZZZL1111) {return self::ZZZZZZZZZl11("SECOND", $ZZZZZZZL1111);} static function ZZZZZZZZZv21($ZZZZZZZL1111) {return self::ZZZZZZZZZl11("MICROSECOND", $ZZZZZZZL1111);} static function ZZZZZZZZZw22() {if(PlatformConnector::ZZZZZZw22() == "mysql") {$ZZZZZZt19 = new ZZZZZZZZZe4();} else {$ZZZZZZt19 = new ZZZZZZZZn13();} return $ZZZZZZt19->ZZZZZZZu20();} static function ZZZZZZZZZx23($ZZZZZZZZx23, $type, $ZZZZZZZZz25, $ZZZZZZZZy24) {if(PlatformConnector::ZZZZZZw22() == "mysql") {$ZZZZZZt19 = new ZZZZZZZZZf5($ZZZZZZZZx23, $type, $ZZZZZZZZz25, $ZZZZZZZZy24);} else {$ZZZZZZt19 = new ZZZZZZZZw22($ZZZZZZZZx23, $type, $ZZZZZZZZz25, $ZZZZZZZZy24);} return $ZZZZZZt19->ZZZZZZZu20();} static function ZZZZZZZZZy24($Zu20, $value = null) {if(PlatformConnector::ZZZZZZw22() == "mysql") {$ZZZZZZt19 = new ZZZZZZZZX2323($Zu20, $value);} else {$ZZZZZZt19 = new ZZZZZZZZi8($Zu20, $value);} return $ZZZZZZt19->ZZZZZZZu20();} static function ZZZZZZZZZz25($ZZZZZZZL1111, $ZZZZZZZZk10, $ZZZZZZZZl11) {if(PlatformConnector::ZZZZZZw22() == "mysql") {$ZZZZZZt19 = new ZZZZZZZZY2424($ZZZZZZZL1111, $ZZZZZZZZk10, $ZZZZZZZZl11);} else {$ZZZZZZt19 = new ZZZZZZZZj9($ZZZZZZZL1111, $ZZZZZZZZk10, $ZZZZZZZZl11);} return $ZZZZZZt19->ZZZZZZZu20();} static function ZZZZZZZZZA00($r17, $type = false) {if(PlatformConnector::ZZZZZZw22() == "mysql") {$ZZZZZZt19 = new ZZZZZZZZZ2525($r17, $type);} else {$ZZZZZZt19 = new ZZZZZZZJ99($r17, $type);} return $ZZZZZZt19->ZZZZZZZu20();} static function ZZZZZZZZZB11($name) {if(PlatformConnector::ZZZZZZw22() == "mysql") {$ZZZZZZt19 = new ZZZZZZZZZa0($name);} else {$ZZZZZZt19 = new ZZZZZZZZo14($name);} return $ZZZZZZt19->ZZZZZZZu20();} static function ZZZZZZZZZC22($name, $query) {if(PlatformConnector::ZZZZZZw22() == "mysql") {$ZZZZZZt19 = new ZZZZZZZZZb1($name, $query);} else {$ZZZZZZt19 = new ZZZZZZZZp15($name, $query);} return $ZZZZZZt19->ZZZZZZZu20();} static function ZZZZZZZZZD33($name) {if(PlatformConnector::ZZZZZZw22() == "mysql") {$ZZZZZZt19 = new ZZZZZZZZZc2($name);} else {$ZZZZZZt19 = new ZZZZZZZZr17($name);} return $ZZZZZZt19->ZZZZZZZu20();} static function ZZZZZZZZZE44($ZZZZZZZZB11) {if(PlatformConnector::ZZZZZZw22() == "mysql") {$ZZZZZZt19 = new ZZZZZZZZZg6($ZZZZZZZZB11);} else {$ZZZZZZt19 = new ZZZZZZZZA00($ZZZZZZZZB11);} return $ZZZZZZt19->ZZZZZZZu20();}}
;class ARUser
{protected $id;protected $ZZZX2323 = false;protected $dateFormat = 'yyyy-mm-dd';protected $ZZZZZZg6 = 24;protected $ZZZZZZO1414 = 'UTC';protected $numberPreferences = array('format' => '123,456,789', 'seperator' => '', 'decimal' => '.',);protected $ZZZZZZZZZF55 = '';protected $name = '';protected $ZZZZZZZZZG66 = array();function __construct(array $ZZZx23 = array()) {$this->ZZZZZZZZZH77($ZZZx23);} function ZZZZZZZZZH77(array $ZZZx23 = array()) {if(isset($ZZZx23['id'])) {$this->id = $ZZZx23['id'];} if(isset($ZZZx23['isAdmin'])) {$this->ZZZX2323 = $ZZZx23['isAdmin'];} if(isset($ZZZx23['numberPreferences'])) {$this->numberPreferences = $ZZZx23['numberPreferences'];} if(isset($ZZZx23['dateFormat'])) {$this->dateFormat = $ZZZx23['dateFormat'];} if(isset($ZZZx23['hourFormat'])) {$this->ZZZZZZg6 = $ZZZx23['hourFormat'];} if(isset($ZZZx23['timeZone'])) {$this->ZZZZZZO1414 = $ZZZx23['timeZone'];} if(isset($ZZZx23['email'])) {$this->ZZZZZZZZZF55 = $ZZZx23['email'];} if(isset($ZZZx23['name'])) {$this->name = $ZZZx23['name'];} if(isset($ZZZx23['roleIds'])) {$this->ZZZZZZZZZG66 = $ZZZx23['roleIds'];}} function ZZZZZZC22() {return $this->id;} function ZZZZU2020() {return $this->ZZZX2323;} function ZZZZZZZZZI88() {return $this->dateFormat;} function ZZZZZZZZZJ99() {return $this->ZZZZZZg6;} function ZZZZZZZZZK1010() {return $this->numberPreferences;} function getTimeZone() {return $this->ZZZZZZO1414;} function ZZZZZZZZZL1111() {return $this->ZZZZZZZZZF55;} function ZZZZZZZZZM1212() {return $this->name;} function ZZZZZZZZZN1313() {return $this->ZZZZZZZZZG66;} function ZZZZZZZZZO1414(){$ZZZZZZZZZP1515 = get_object_vars($this);return $ZZZZZZZZZP1515;}}
;class ZZZZZZZZZQ1616 {private $moduleName;private $ZZY2424;private $ZZZc2 = array();private $descriptor;private $ZZZZZZZZZR1717;private $ZZZg6 = -1;function __construct() {} function ZZZZZZZZZS1818() {return $this->moduleName;} function ZZZZZZZZZT1919($moduleName) {$this->moduleName = $moduleName;} function ZZZZZZZZZU2020() {return $this->ZZZc2;} function ZZZZZZZZZV2121() {$prefix = "m";$ZZZc2 = $this->ZZZZZZZZZU2020();$ZZZZZZZZZW2222 = array();$ZZT1919 = count($ZZZc2);$ZZZZS1818 = new ZZZZT1919();for($Zf5 = 0;$Zf5<$ZZT1919;$Zf5++){$ZZZc2[$Zf5]['fieldname_org'] = $ZZZc2[$Zf5]['fieldname'];$ZZZc2[$Zf5]['fieldname'] = $prefix.$this->ZZZZZZZZZX2323()."_".$this->moduleName."_".$ZZZc2[$Zf5]['fieldname'];$ZZZc2[$Zf5]['fieldlabel'] = $ZZZZS1818->ZZZZZk10($ZZZc2[$Zf5]['fieldlabel'],$this->moduleName);$ZZZc2[$Zf5]['module'] = $this->ZZZZZZZZZX2323();$ZZZZZZZZZW2222[$ZZZc2[$Zf5]['fieldname']] = $ZZZc2[$Zf5];} return $ZZZZZZZZZW2222;} function ZZZZZZZZZY2424($ZZZc2) {$this->ZZZc2 = $ZZZc2;} function ZZZZZZZZZZ2525() {return $this->ZZY2424;} function ZZZZZZZZZZa0($ZZY2424) {$this->ZZY2424 = $ZZY2424;} function ZZZZZZZZZZb1() {return $this->descriptor;} function ZZZZZZZZZZc2($descriptor) {$this->descriptor = $descriptor;} function ZZZZZZZZZZd3() {return $this->ZZZZZZZZZR1717;} function ZZZZZZZZZZe4($ZZZZZZZZZR1717) {$this->ZZZZZZZZZR1717 = $ZZZZZZZZZR1717;} function ZZZZZZZZZX2323() {if($this->ZZZg6 === -1){throw new Exception("Module number not defined!");} return $this->ZZZg6;} function ZZZZZZZZZZf5($ZZZg6) {$this->ZZZg6 = $ZZZg6;} function ZZZZZZZZZZg6($name, $value) {$ZZZc2 = array();foreach ($this->ZZZZZZZZZU2020() as $field) {if (isset($field[$name]) && $field[$name] == $value) {$ZZZc2[] = $field;}} return $ZZZc2;} function ZZZZZZZZZZh7($name, $value) {$ZZZc2 = $this->ZZZZZZZZZZg6($name, $value);if (empty($ZZZc2)) {return false;} return $ZZZc2[0];}}
;class ZZZZZZZZZZi8 {private $ZZZZZZZZZZj9;function __construct($ZZZZZZZZZZj9) {for ($Zf5 = 0, $ZZZZZZZZZZk10 = count($ZZZZZZZZZZj9);$Zf5 < $ZZZZZZZZZZk10;$Zf5++) {$ZZZZZZZZZZl11 = ZZZZZZZZZZm12::ZZZb1($ZZZZZZZZZZj9[$Zf5]);$ZZZZZZZZZZl11->ZZZZZZZZZZf5($Zf5);$this->ZZZZZZZZZZj9[] = $ZZZZZZZZZZl11;}} function ZZZZZZ2525() {return $this->ZZZZZZZZZZj9;} function ZZZZZZZZZU2020(){$ZZZc2 = array();foreach ($this->ZZZZZZZZZZj9 as $module) {$ZZZc2 = array_merge($ZZZc2, $module->ZZZZZZZZZV2121());} return $ZZZc2;}}
;class ZZZZZZZZZZm12{private static $ZZZZZZZZZZn13 = false;private static $ZZZZZZZZZZj9 = array();public static function ZZZb1($moduleName, $ZZZq16=false){if(ZZZZZZZZZZm12::$ZZZZZZZZZZn13 === false){ZZZZZZZZZZm12::$ZZZZZZZZZZn13 = ZZZZZZZZZZo14::load('definitions', 'modules');} if(isset(ZZZZZZZZZZm12::$ZZZZZZZZZZj9[$moduleName])){return ZZZZZZZZZZm12::$ZZZZZZZZZZj9[$moduleName];} $module = new ZZZZZZZZZQ1616();$module->ZZZZZZZZZT1919($moduleName);$ZZZc2 = ZZZZZZZZZZm12::ZZW2222($moduleName, $ZZZq16);$module->ZZZZZZZZZY2424($ZZZc2);$ZZZZZZZZZZp15 = ZZZZZZZZZZm12::ZZZZZZZZZZq16($moduleName);$module->ZZZZZZZZZZa0($ZZZZZZZZZZp15->table_name);$module->ZZZZZZZZZZc2($ZZZZZZZZZZp15);$module->ZZZZZZZZZZe4(ZZZZZZZZZZm12::ZZZr17($moduleName, $ZZZc2));ZZZZZZZZZZm12::$ZZZZZZZZZZj9[$moduleName] = $module;return $module;} private static function ZZW2222($module, $ZZZq16 = false){$ZZZ2525 = array();if(isset(ZZZZZZZZZZm12::$ZZZZZZZZZZn13[$module]) && isset(ZZZZZZZZZZm12::$ZZZZZZZZZZn13[$module]['fields'])){return ZZZZZZZZZZm12::$ZZZZZZZZZZn13[$module]['fields'];} $ZZZa0 = PlatformConnector::ZZZb1($module);if(!$ZZZa0) {return false;} $ZZY2424 = $ZZZa0->getTableName();$ZZZc2 = $ZZZa0->getFieldDefinitions();foreach($ZZZc2 as $field) {if(!isset($field['vname'])) {continue;} $ZZZd3 = ZZZZZZZZZZm12::ZZX2323($ZZY2424, $field, $ZZZq16);if($ZZZd3) {$ZZZ2525[] = $ZZZd3;}} if($module == 'oqc_Service') {$ZZZ2525[] = array('tablename' => "oqc_service", 'columnname' => "quantity * #alias#.price", 'fieldname' => "netprice", 'fieldlabel' => "LBL_NET_PRICE", 'uitype' => 'float', 'typeofdata' => 'N~M',);} return $ZZZ2525;} private static function ZZZZZZZZZZq16($module){$ZZS1818 = null;if(isset(ZZZZZZZZZZm12::$ZZZZZZZZZZn13[$module]) && isset(ZZZZZZZZZZm12::$ZZZZZZZZZZn13[$module]['tab_name_index'])){$ZZS1818 = array('tab_name_index' => ZZZZZZZZZZm12::$ZZZZZZZZZZn13[$module]['tab_name_index'], 'table_name' => ZZZZZZZZZZm12::$ZZZZZZZZZZn13[$module]['table_name'], 'table_index' => ZZZZZZZZZZm12::$ZZZZZZZZZZn13[$module]['table_index']);} $ZZZZZq16 = ($ZZS1818)? ((object) $ZZS1818): ($ZZS1818);if(!$ZZZZZq16){$ZZZZZq16 = PlatformConnector::ZZZb1($module);$ZZZZZt19 = 'id';$ZZS1818 = array('table_index' => $ZZZZZt19, 'table_name' => $ZZZZZq16->table_name, 'tab_name_index' => array(array('name' => $ZZZZZq16->table_name, 'idCol' => $ZZZZZt19), array('name' => $ZZZZZq16->table_name."_cstm", 'idCol' => $ZZZZZt19."_c")));} $ZZZZZq16 = ($ZZS1818)? ((object) $ZZS1818): ($ZZS1818);return $ZZZZZq16;} private static function ZZZr17($module, $ZZZc2){$ZZZs18 = array();$ZZZZZZZZZZr17 = array();foreach ($ZZZc2 as $field) {$ZZZZZZZZZZr17[$field['block']][] = $field;} foreach ($ZZZZZZZZZZr17 as $ZZZZZZZZZZs18 => $ZZZZZZZZZZt19) {$ZZZZZl11 = "---";$ZZZt19 = array('id' => $ZZZZZZZZZZs18, 'label' => $ZZZZZl11, 'fields' => $ZZZZZZZZZZt19,);$ZZZs18[] = $ZZZt19;} return $ZZZs18;} private static function ZZX2323($ZZY2424, $field, $ZZZq16=false) {$ZZZ2525 = array('tablename' => $ZZY2424, 'columnname' => $field['name'], 'fieldname' => $field['name'], 'fieldlabel' => $field['vname'], 'uitype' => $field['type'], 'typeofdata' => 'V~O', 'block' => '1',);if($field['name'] == 'id' && $ZZY2424 == 'users'){$ZZZ2525['uitype'] = 'assigned_user_name';$ZZZ2525['related_module'] = 'Users';$ZZZ2525['table'] = 'users';$ZZZ2525['id_name'] = 'id';$ZZZ2525['rname'] = 'user_name';} if(isset($field['audited'])){$ZZZ2525['audited'] = $field['audited'];} if(isset($field['function'])){$ZZZ2525['function'] = $field['function'];} if(isset($field['function_bean'])){$ZZZ2525['function_bean'] = $field['function_bean'];} if(isset($field['dbType'])) {$ZZZ2525['dbType'] = $field['dbType'];} if(isset($field['options'])) {$ZZZ2525['options'] = $field['options'];} if($field['type'] == 'link') {return false;} if(isset($field['source'])) {if(in_array($field['source'], array('non-db'))) {return false;} if($field['source'] == 'custom_fields') {$ZZZ2525['tablename'] = $ZZZ2525['tablename'] . '_cstm';}} if($ZZZq16){return $ZZZ2525;} if($field['vname'] == '') {return false;} if($field['type'] == 'relate') {if(!isset($field['module'])) {return false;} $ZZZ2525['related_module'] = $field['module'];$ZZZ2525['id_name'] = $field['id_name'];if(isset($field['table'])) {$ZZZ2525['table'] = $field['table'];} if(isset($field['rname'])) {$ZZZ2525['rname'] = $field['rname'];}} if($field['type'] == 'assigned_user_name') {$ZZZ2525['related_module'] = 'Users';$ZZZ2525['table'] = 'users';$ZZZ2525['id_name'] = 'id';if(isset($field['rname'])) {$ZZZ2525['rname'] = $field['rname'];}} return $ZZZ2525;}}
;